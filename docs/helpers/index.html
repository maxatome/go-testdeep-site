<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.80.0">
<meta name=description content>
<link rel=icon href=/images/favicon.png type=image/png>
<title>Helpers :: go-testdeep</title>
<link href=/css/nucleus.css?1615795024 rel=stylesheet>
<link href=/css/fontawesome-all.min.css?1615795024 rel=stylesheet>
<link href=/css/hybrid.css?1615795024 rel=stylesheet>
<link href=/css/featherlight.min.css?1615795024 rel=stylesheet>
<link href=/css/perfect-scrollbar.min.css?1615795024 rel=stylesheet>
<link href=/css/auto-complete.css?1615795024 rel=stylesheet>
<link href=/css/atom-one-dark-reasonable.css?1615795024 rel=stylesheet>
<link href=/css/theme.css?1615795024 rel=stylesheet>
<link href=/css/hugo-theme.css?1615795024 rel=stylesheet>
<link href=/css/theme-green.css?1615795024 rel=stylesheet>
<script src=/js/jquery-3.3.1.min.js?1615795024></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style>
<meta name=google-site-verification content="I15BdfDU61eURsp8IywfU9hV8Rygaa4JsH-U8kKAxVs">
<style type=text/css>#body-inner pre{white-space:pre}</style>
</head>
<body data-url=/helpers/>
<nav id=sidebar>
<div id=header-wrapper>
<div id=header>
<a id=logo href=https://go-testdeep.zetta.rocks/><img src=https://go-testdeep.zetta.rocks//images/logo.svg></a>
</div>
<div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div>
<script type=text/javascript src=/js/lunr.min.js?1615795024></script>
<script type=text/javascript src=/js/auto-complete.js?1615795024></script>
<script type=text/javascript>var baseurl="https:\/\/go-testdeep.zetta.rocks\/";</script>
<script type=text/javascript src=/js/search.js?1615795024></script>
</div>
<div class=highlightable>
<ul class=topics>
<li data-nav-id=/introduction/ title=Introduction class=dd-item>
<a href=/introduction/>
Introduction
</a>
</li>
<li data-nav-id=/example/ title=Example class=dd-item>
<a href=/example/>
Example
</a>
<ul>
<li data-nav-id=/example/using-testing/ title="Using testing package" class=dd-item>
<a href=/example/using-testing/>
Using testing package
</a>
</li>
<li data-nav-id=/example/basic-testdeep/ title="Basic go-testdeep approach" class=dd-item>
<a href=/example/basic-testdeep/>
Basic go-testdeep approach
</a>
</li>
<li data-nav-id=/example/advanced-testdeep/ title="Advanced go-testdeep technique" class=dd-item>
<a href=/example/advanced-testdeep/>
Advanced go-testdeep technique
</a>
</li>
<li data-nav-id=/example/td-cmp-shortcuts/ title="go-testdeep Cmp shortcuts" class=dd-item>
<a href=/example/td-cmp-shortcuts/>
go-testdeep Cmp shortcuts
</a>
</li>
<li data-nav-id=/example/td-t/ title="td.T type" class=dd-item>
<a href=/example/td-t/>
td.T type
</a>
</li>
<li data-nav-id=/example/anchoring/ title="Using anchoring" class=dd-item>
<a href=/example/anchoring/>
Using anchoring
</a>
</li>
</ul>
</li>
<li data-nav-id=/functions/ title=Functions class=dd-item>
<a href=/functions/>
Functions
</a>
<ul>
<li data-nav-id=/functions/td-t/ title=td.T class=dd-item>
<a href=/functions/td-t/>
td.T
</a>
</li>
</ul>
</li>
<li data-nav-id=/operators/ title=Operators class=dd-item>
<a href=/operators/>
Operators
</a>
<ul>
<li data-nav-id=/operators/matrix/ title="Operators matrices" class=dd-item>
<a href=/operators/matrix/>
Operators matrices
</a>
</li>
<li data-nav-id=/operators/all/ title=All class=dd-item>
<a href=/operators/all/>
All
</a>
</li>
<li data-nav-id=/operators/any/ title=Any class=dd-item>
<a href=/operators/any/>
Any
</a>
</li>
<li data-nav-id=/operators/array/ title=Array class=dd-item>
<a href=/operators/array/>
Array
</a>
</li>
<li data-nav-id=/operators/arrayeach/ title=ArrayEach class=dd-item>
<a href=/operators/arrayeach/>
ArrayEach
</a>
</li>
<li data-nav-id=/operators/bag/ title=Bag class=dd-item>
<a href=/operators/bag/>
Bag
</a>
</li>
<li data-nav-id=/operators/between/ title=Between class=dd-item>
<a href=/operators/between/>
Between
</a>
</li>
<li data-nav-id=/operators/cap/ title=Cap class=dd-item>
<a href=/operators/cap/>
Cap
</a>
</li>
<li data-nav-id=/operators/catch/ title=Catch class=dd-item>
<a href=/operators/catch/>
Catch
</a>
</li>
<li data-nav-id=/operators/code/ title=Code class=dd-item>
<a href=/operators/code/>
Code
</a>
</li>
<li data-nav-id=/operators/contains/ title=Contains class=dd-item>
<a href=/operators/contains/>
Contains
</a>
</li>
<li data-nav-id=/operators/containskey/ title=ContainsKey class=dd-item>
<a href=/operators/containskey/>
ContainsKey
</a>
</li>
<li data-nav-id=/operators/delay/ title=Delay class=dd-item>
<a href=/operators/delay/>
Delay
</a>
</li>
<li data-nav-id=/operators/empty/ title=Empty class=dd-item>
<a href=/operators/empty/>
Empty
</a>
</li>
<li data-nav-id=/operators/gt/ title=Gt class=dd-item>
<a href=/operators/gt/>
Gt
</a>
</li>
<li data-nav-id=/operators/gte/ title=Gte class=dd-item>
<a href=/operators/gte/>
Gte
</a>
</li>
<li data-nav-id=/operators/hasprefix/ title=HasPrefix class=dd-item>
<a href=/operators/hasprefix/>
HasPrefix
</a>
</li>
<li data-nav-id=/operators/hassuffix/ title=HasSuffix class=dd-item>
<a href=/operators/hassuffix/>
HasSuffix
</a>
</li>
<li data-nav-id=/operators/ignore/ title=Ignore class=dd-item>
<a href=/operators/ignore/>
Ignore
</a>
</li>
<li data-nav-id=/operators/isa/ title=Isa class=dd-item>
<a href=/operators/isa/>
Isa
</a>
</li>
<li data-nav-id=/operators/json/ title=JSON class=dd-item>
<a href=/operators/json/>
JSON
</a>
</li>
<li data-nav-id=/operators/jsonpointer/ title=JSONPointer class=dd-item>
<a href=/operators/jsonpointer/>
JSONPointer
</a>
</li>
<li data-nav-id=/operators/keys/ title=Keys class=dd-item>
<a href=/operators/keys/>
Keys
</a>
</li>
<li data-nav-id=/operators/lax/ title=Lax class=dd-item>
<a href=/operators/lax/>
Lax
</a>
</li>
<li data-nav-id=/operators/len/ title=Len class=dd-item>
<a href=/operators/len/>
Len
</a>
</li>
<li data-nav-id=/operators/lt/ title=Lt class=dd-item>
<a href=/operators/lt/>
Lt
</a>
</li>
<li data-nav-id=/operators/lte/ title=Lte class=dd-item>
<a href=/operators/lte/>
Lte
</a>
</li>
<li data-nav-id=/operators/map/ title=Map class=dd-item>
<a href=/operators/map/>
Map
</a>
</li>
<li data-nav-id=/operators/mapeach/ title=MapEach class=dd-item>
<a href=/operators/mapeach/>
MapEach
</a>
</li>
<li data-nav-id=/operators/n/ title=N class=dd-item>
<a href=/operators/n/>
N
</a>
</li>
<li data-nav-id=/operators/nan/ title=NaN class=dd-item>
<a href=/operators/nan/>
NaN
</a>
</li>
<li data-nav-id=/operators/nil/ title=Nil class=dd-item>
<a href=/operators/nil/>
Nil
</a>
</li>
<li data-nav-id=/operators/none/ title=None class=dd-item>
<a href=/operators/none/>
None
</a>
</li>
<li data-nav-id=/operators/not/ title=Not class=dd-item>
<a href=/operators/not/>
Not
</a>
</li>
<li data-nav-id=/operators/notany/ title=NotAny class=dd-item>
<a href=/operators/notany/>
NotAny
</a>
</li>
<li data-nav-id=/operators/notempty/ title=NotEmpty class=dd-item>
<a href=/operators/notempty/>
NotEmpty
</a>
</li>
<li data-nav-id=/operators/notnan/ title=NotNaN class=dd-item>
<a href=/operators/notnan/>
NotNaN
</a>
</li>
<li data-nav-id=/operators/notnil/ title=NotNil class=dd-item>
<a href=/operators/notnil/>
NotNil
</a>
</li>
<li data-nav-id=/operators/notzero/ title=NotZero class=dd-item>
<a href=/operators/notzero/>
NotZero
</a>
</li>
<li data-nav-id=/operators/pptr/ title=PPtr class=dd-item>
<a href=/operators/pptr/>
PPtr
</a>
</li>
<li data-nav-id=/operators/ptr/ title=Ptr class=dd-item>
<a href=/operators/ptr/>
Ptr
</a>
</li>
<li data-nav-id=/operators/re/ title=Re class=dd-item>
<a href=/operators/re/>
Re
</a>
</li>
<li data-nav-id=/operators/reall/ title=ReAll class=dd-item>
<a href=/operators/reall/>
ReAll
</a>
</li>
<li data-nav-id=/operators/set/ title=Set class=dd-item>
<a href=/operators/set/>
Set
</a>
</li>
<li data-nav-id=/operators/shallow/ title=Shallow class=dd-item>
<a href=/operators/shallow/>
Shallow
</a>
</li>
<li data-nav-id=/operators/slice/ title=Slice class=dd-item>
<a href=/operators/slice/>
Slice
</a>
</li>
<li data-nav-id=/operators/smuggle/ title=Smuggle class=dd-item>
<a href=/operators/smuggle/>
Smuggle
</a>
</li>
<li data-nav-id=/operators/sstruct/ title=SStruct class=dd-item>
<a href=/operators/sstruct/>
SStruct
</a>
</li>
<li data-nav-id=/operators/string/ title=String class=dd-item>
<a href=/operators/string/>
String
</a>
</li>
<li data-nav-id=/operators/struct/ title=Struct class=dd-item>
<a href=/operators/struct/>
Struct
</a>
</li>
<li data-nav-id=/operators/subbagof/ title=SubBagOf class=dd-item>
<a href=/operators/subbagof/>
SubBagOf
</a>
</li>
<li data-nav-id=/operators/subjsonof/ title=SubJSONOf class=dd-item>
<a href=/operators/subjsonof/>
SubJSONOf
</a>
</li>
<li data-nav-id=/operators/submapof/ title=SubMapOf class=dd-item>
<a href=/operators/submapof/>
SubMapOf
</a>
</li>
<li data-nav-id=/operators/subsetof/ title=SubSetOf class=dd-item>
<a href=/operators/subsetof/>
SubSetOf
</a>
</li>
<li data-nav-id=/operators/superbagof/ title=SuperBagOf class=dd-item>
<a href=/operators/superbagof/>
SuperBagOf
</a>
</li>
<li data-nav-id=/operators/superjsonof/ title=SuperJSONOf class=dd-item>
<a href=/operators/superjsonof/>
SuperJSONOf
</a>
</li>
<li data-nav-id=/operators/supermapof/ title=SuperMapOf class=dd-item>
<a href=/operators/supermapof/>
SuperMapOf
</a>
</li>
<li data-nav-id=/operators/supersetof/ title=SuperSetOf class=dd-item>
<a href=/operators/supersetof/>
SuperSetOf
</a>
</li>
<li data-nav-id=/operators/tag/ title=Tag class=dd-item>
<a href=/operators/tag/>
Tag
</a>
</li>
<li data-nav-id=/operators/trunctime/ title=TruncTime class=dd-item>
<a href=/operators/trunctime/>
TruncTime
</a>
</li>
<li data-nav-id=/operators/values/ title=Values class=dd-item>
<a href=/operators/values/>
Values
</a>
</li>
<li data-nav-id=/operators/zero/ title=Zero class=dd-item>
<a href=/operators/zero/>
Zero
</a>
</li>
</ul>
</li>
<li data-nav-id=/helpers/ title=Helpers class="dd-item
parent
active">
<a href=/helpers/>
Helpers
</a>
</li>
<li data-nav-id=/faq/ title=FAQ class=dd-item>
<a href=/faq/>
FAQ
</a>
</li>
</ul>
<section id=shortcuts>
<h3>More</h3>
<ul>
<li>
<a class=padding href=https://go-testdeep.zetta.rocks/prez><i class="fab fa-slideshare"></i>&nbsp;Presentation</a>
</li>
<li>
<a class=padding href=https://github.com/maxatome/go-testdeep><i class="fab fa-github"></i>&nbsp;Github repo</a>
</li>
<li>
<a class=padding href=https://pkg.go.dev/github.com/maxatome/go-testdeep/td><i class="fas fa-book"></i>&nbsp;godoc</a>
</li>
<li>
<a class=padding href=https://pkg.go.dev/github.com/maxatome/go-testdeep/helpers/tdhttp><i class="fas fa-book"></i>&nbsp;godoc API tester — tdhttp</a>
</li>
<li>
<a class=padding href=https://pkg.go.dev/github.com/maxatome/go-testdeep/helpers/tdsuite><i class="fas fa-book"></i>&nbsp;godoc testing suite — tdsuite</a>
</li>
<li>
<a class=padding href=https://pkg.go.dev/github.com/maxatome/go-testdeep/helpers/tdutil><i class="fas fa-book"></i>&nbsp;godoc helpers utils — tdutil</a>
</li>
</ul>
</section>
<section id=footer>
<p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p>
</section>
</div>
</nav>
<section id=body>
<div id=overlay></div>
<div class="padding highlightable">
<div>
<div id=top-bar>
<div id=breadcrumbs itemscope itemtype=http://schema.org/BreadcrumbList>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>
<span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/> <span itemprop=name>go-testdeep</span><meta itemprop=position content="1"></a></span> > Helpers
</span>
</div>
<div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li><a href=#http-api-test-helper-aka-tdhttp>HTTP API test helper aka <code>tdhttp</code></a></li>
<li><a href=#helpers-utils-aka-tdutil>Helpers utils aka <code>tdutil</code></a></li>
</ul>
</nav>
</div>
</div>
</div>
</div>
<div id=head-tags>
</div>
<div id=body-inner>
<h1>
Helpers
</h1>
<h2 id=http-api-test-helper-aka-tdhttp>HTTP API test helper aka <code>tdhttp</code></h2>
<p>The
<a href=https://pkg.go.dev/github.com/maxatome/go-testdeep/helpers/tdhttp><code>tdhttp</code></a>
package helper allows to easily test HTTP APIs.</p>
<p>It handles any kind of API, with some specific features for the routes
accepting and/or returning JSON or XML.</p>
<p>See examples of use in
<a href=https://pkg.go.dev/github.com/maxatome/go-testdeep/helpers/tdhttp/#pkg-examples><code>tdhttp</code> package example section</a>,
in
<a href=/faq/#what-about-testing-the-response-using-my-api>FAQ</a>
or expand the one below:</p>
<div class=expand>
<div class=expand-label style=cursor:pointer onclick="$h=$(this);$h.next('div').slideToggle(100,function(){$h.children('i').attr('class',function(){return $h.next('div').is(':visible')?'fas fa-chevron-down':'fas fa-chevron-right';});});">
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Main example
</span>
</div>
<div class=expand-content style=display:none>
<div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#6ab825;font-weight:700>package</span> myapi

<span style=color:#6ab825;font-weight:700>import</span> (
	<span style=color:#ed9d13>&#34;encoding/json&#34;</span>
	<span style=color:#ed9d13>&#34;encoding/xml&#34;</span>
	<span style=color:#ed9d13>&#34;fmt&#34;</span>
	<span style=color:#ed9d13>&#34;io/ioutil&#34;</span>
	<span style=color:#ed9d13>&#34;net/http&#34;</span>
	<span style=color:#ed9d13>&#34;net/url&#34;</span>
	<span style=color:#ed9d13>&#34;strconv&#34;</span>
	<span style=color:#ed9d13>&#34;strings&#34;</span>
	<span style=color:#ed9d13>&#34;sync&#34;</span>
	<span style=color:#ed9d13>&#34;testing&#34;</span>
	<span style=color:#ed9d13>&#34;time&#34;</span>

	<span style=color:#ed9d13>&#34;github.com/maxatome/go-testdeep/helpers/tdhttp&#34;</span>
	<span style=color:#ed9d13>&#34;github.com/maxatome/go-testdeep/td&#34;</span>
)

<span style=color:#6ab825;font-weight:700>func</span> <span style=color:#447fcf>TestMyAPI</span>(t *testing.T) {
	<span style=color:#999;font-style:italic>// Our API handle Persons with 3 routes:
</span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// - POST /person
</span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// - GET /person/{personID}
</span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// - DELETE /person/{personID}
</span><span style=color:#999;font-style:italic></span>
	<span style=color:#999;font-style:italic>// Person describes a person.
</span><span style=color:#999;font-style:italic></span>	<span style=color:#6ab825;font-weight:700>type</span> Person <span style=color:#6ab825;font-weight:700>struct</span> {
		ID        <span style=color:#6ab825;font-weight:700>int64</span>      <span style=color:#ed9d13>`json:&#34;id,omitempty&#34; xml:&#34;ID,omitempty&#34;`</span>
		Name      <span style=color:#6ab825;font-weight:700>string</span>     <span style=color:#ed9d13>`json:&#34;name&#34; xml:&#34;Name&#34;`</span>
		Age       <span style=color:#6ab825;font-weight:700>int</span>        <span style=color:#ed9d13>`json:&#34;age&#34; xml:&#34;Age&#34;`</span>
		CreatedAt *time.Time <span style=color:#ed9d13>`json:&#34;created_at,omitempty&#34; xml:&#34;CreatedAt,omitempty&#34;`</span>
	}

	<span style=color:#999;font-style:italic>// Error is returned to the client in case of error.
</span><span style=color:#999;font-style:italic></span>	<span style=color:#6ab825;font-weight:700>type</span> Error <span style=color:#6ab825;font-weight:700>struct</span> {
		Mesg <span style=color:#6ab825;font-weight:700>string</span> <span style=color:#ed9d13>`json:&#34;message&#34; xml:&#34;Message&#34;`</span>
		Code <span style=color:#6ab825;font-weight:700>int</span>    <span style=color:#ed9d13>`json:&#34;code&#34; xml:&#34;Code&#34;`</span>
	}

	<span style=color:#999;font-style:italic>// Our µDB :)
</span><span style=color:#999;font-style:italic></span>	<span style=color:#6ab825;font-weight:700>var</span> mu sync.Mutex
	personByID := <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>int64</span>]*Person{}
	personByName := <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>string</span>]*Person{}
	<span style=color:#6ab825;font-weight:700>var</span> lastID <span style=color:#6ab825;font-weight:700>int64</span>

	<span style=color:#999;font-style:italic>// reply is a helper to send responses.
</span><span style=color:#999;font-style:italic></span>	reply := <span style=color:#6ab825;font-weight:700>func</span>(w http.ResponseWriter, status <span style=color:#6ab825;font-weight:700>int</span>, contentType <span style=color:#6ab825;font-weight:700>string</span>, body <span style=color:#6ab825;font-weight:700>interface</span>{}) {
		<span style=color:#6ab825;font-weight:700>if</span> body == <span style=color:#6ab825;font-weight:700>nil</span> {
			w.<span style=color:#447fcf>WriteHeader</span>(status)
			<span style=color:#6ab825;font-weight:700>return</span>
		}

		w.<span style=color:#447fcf>Header</span>().<span style=color:#447fcf>Set</span>(<span style=color:#ed9d13>&#34;Content-Type&#34;</span>, contentType)
		w.<span style=color:#447fcf>WriteHeader</span>(status)
		<span style=color:#6ab825;font-weight:700>switch</span> contentType {
		<span style=color:#6ab825;font-weight:700>case</span> <span style=color:#ed9d13>&#34;application/json&#34;</span>:
			json.<span style=color:#447fcf>NewEncoder</span>(w).<span style=color:#447fcf>Encode</span>(body) <span style=color:#999;font-style:italic>//nolint: errcheck
</span><span style=color:#999;font-style:italic></span>		<span style=color:#6ab825;font-weight:700>case</span> <span style=color:#ed9d13>&#34;application/xml&#34;</span>:
			xml.<span style=color:#447fcf>NewEncoder</span>(w).<span style=color:#447fcf>Encode</span>(body) <span style=color:#999;font-style:italic>//nolint: errcheck
</span><span style=color:#999;font-style:italic></span>		<span style=color:#6ab825;font-weight:700>default</span>: <span style=color:#999;font-style:italic>// text/plain
</span><span style=color:#999;font-style:italic></span>			fmt.<span style=color:#447fcf>Fprintf</span>(w, <span style=color:#ed9d13>&#34;%+v&#34;</span>, body)
		}
	}

	<span style=color:#999;font-style:italic>// Our API
</span><span style=color:#999;font-style:italic></span>	mux := http.<span style=color:#447fcf>NewServeMux</span>()

	<span style=color:#999;font-style:italic>// POST /person
</span><span style=color:#999;font-style:italic></span>	mux.<span style=color:#447fcf>HandleFunc</span>(<span style=color:#ed9d13>&#34;/person&#34;</span>, <span style=color:#6ab825;font-weight:700>func</span>(w http.ResponseWriter, req *http.Request) {
		<span style=color:#6ab825;font-weight:700>if</span> req.Method != http.MethodPost {
			http.<span style=color:#447fcf>Error</span>(w, <span style=color:#ed9d13>&#34;Method not allowed&#34;</span>, http.StatusMethodNotAllowed)
			<span style=color:#6ab825;font-weight:700>return</span>
		}

		<span style=color:#6ab825;font-weight:700>if</span> req.Body == <span style=color:#6ab825;font-weight:700>nil</span> {
			http.<span style=color:#447fcf>Error</span>(w, <span style=color:#ed9d13>&#34;Bad request&#34;</span>, http.StatusBadRequest)
			<span style=color:#6ab825;font-weight:700>return</span>
		}
		<span style=color:#6ab825;font-weight:700>defer</span> req.Body.<span style=color:#447fcf>Close</span>()

		<span style=color:#6ab825;font-weight:700>var</span> in Person
		<span style=color:#6ab825;font-weight:700>var</span> contentType <span style=color:#6ab825;font-weight:700>string</span>

		<span style=color:#6ab825;font-weight:700>switch</span> req.Header.<span style=color:#447fcf>Get</span>(<span style=color:#ed9d13>&#34;Content-Type&#34;</span>) {
		<span style=color:#6ab825;font-weight:700>case</span> <span style=color:#ed9d13>&#34;application/json&#34;</span>:
			err := json.<span style=color:#447fcf>NewDecoder</span>(req.Body).<span style=color:#447fcf>Decode</span>(&amp;in)
			<span style=color:#6ab825;font-weight:700>if</span> err != <span style=color:#6ab825;font-weight:700>nil</span> {
				http.<span style=color:#447fcf>Error</span>(w, <span style=color:#ed9d13>&#34;Bad request&#34;</span>, http.StatusBadRequest)
				<span style=color:#6ab825;font-weight:700>return</span>
			}
		<span style=color:#6ab825;font-weight:700>case</span> <span style=color:#ed9d13>&#34;application/xml&#34;</span>:
			err := xml.<span style=color:#447fcf>NewDecoder</span>(req.Body).<span style=color:#447fcf>Decode</span>(&amp;in)
			<span style=color:#6ab825;font-weight:700>if</span> err != <span style=color:#6ab825;font-weight:700>nil</span> {
				http.<span style=color:#447fcf>Error</span>(w, <span style=color:#ed9d13>&#34;Bad request&#34;</span>, http.StatusBadRequest)
				<span style=color:#6ab825;font-weight:700>return</span>
			}
		<span style=color:#6ab825;font-weight:700>case</span> <span style=color:#ed9d13>&#34;application/x-www-form-urlencoded&#34;</span>:
			b, err := ioutil.<span style=color:#447fcf>ReadAll</span>(req.Body)
			<span style=color:#6ab825;font-weight:700>if</span> err != <span style=color:#6ab825;font-weight:700>nil</span> {
				http.<span style=color:#447fcf>Error</span>(w, <span style=color:#ed9d13>&#34;Bad request&#34;</span>, http.StatusBadRequest)
				<span style=color:#6ab825;font-weight:700>return</span>
			}
			v, err := url.<span style=color:#447fcf>ParseQuery</span>(<span style=color:#24909d>string</span>(b))
			<span style=color:#6ab825;font-weight:700>if</span> err != <span style=color:#6ab825;font-weight:700>nil</span> {
				http.<span style=color:#447fcf>Error</span>(w, <span style=color:#ed9d13>&#34;Bad request&#34;</span>, http.StatusBadRequest)
				<span style=color:#6ab825;font-weight:700>return</span>
			}
			in.Name = v.<span style=color:#447fcf>Get</span>(<span style=color:#ed9d13>&#34;name&#34;</span>)
			in.Age, err = strconv.<span style=color:#447fcf>Atoi</span>(v.<span style=color:#447fcf>Get</span>(<span style=color:#ed9d13>&#34;age&#34;</span>))
			<span style=color:#6ab825;font-weight:700>if</span> err != <span style=color:#6ab825;font-weight:700>nil</span> {
				http.<span style=color:#447fcf>Error</span>(w, <span style=color:#ed9d13>&#34;Bad request&#34;</span>, http.StatusBadRequest)
				<span style=color:#6ab825;font-weight:700>return</span>
			}
		<span style=color:#6ab825;font-weight:700>default</span>:
			http.<span style=color:#447fcf>Error</span>(w, <span style=color:#ed9d13>&#34;Unsupported media type&#34;</span>, http.StatusUnsupportedMediaType)
			<span style=color:#6ab825;font-weight:700>return</span>
		}

		contentType = req.Header.<span style=color:#447fcf>Get</span>(<span style=color:#ed9d13>&#34;Accept&#34;</span>)

		<span style=color:#6ab825;font-weight:700>if</span> in.Name == <span style=color:#ed9d13>&#34;&#34;</span> || in.Age &lt;= <span style=color:#3677a9>0</span> {
			<span style=color:#447fcf>reply</span>(w, http.StatusBadRequest, contentType, Error{
				Mesg: <span style=color:#ed9d13>&#34;Empty name or bad age&#34;</span>,
				Code: http.StatusBadRequest,
			})
			<span style=color:#6ab825;font-weight:700>return</span>
		}

		mu.<span style=color:#447fcf>Lock</span>()
		<span style=color:#6ab825;font-weight:700>defer</span> mu.<span style=color:#447fcf>Unlock</span>()
		<span style=color:#6ab825;font-weight:700>if</span> personByName[in.Name] != <span style=color:#6ab825;font-weight:700>nil</span> {
			<span style=color:#447fcf>reply</span>(w, http.StatusConflict, contentType, Error{
				Mesg: <span style=color:#ed9d13>&#34;Person already exists&#34;</span>,
				Code: http.StatusConflict,
			})
			<span style=color:#6ab825;font-weight:700>return</span>
		}
		lastID++
		in.ID = lastID
		now := time.<span style=color:#447fcf>Now</span>()
		in.CreatedAt = &amp;now
		personByID[in.ID] = &amp;in
		personByName[in.Name] = &amp;in
		<span style=color:#447fcf>reply</span>(w, http.StatusCreated, contentType, in)
	})

	<span style=color:#999;font-style:italic>// GET /person/{id}
</span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// DELETE /person/{id}
</span><span style=color:#999;font-style:italic></span>	mux.<span style=color:#447fcf>HandleFunc</span>(<span style=color:#ed9d13>&#34;/person/&#34;</span>, <span style=color:#6ab825;font-weight:700>func</span>(w http.ResponseWriter, req *http.Request) {
		id, err := strconv.<span style=color:#447fcf>ParseInt</span>(strings.<span style=color:#447fcf>TrimPrefix</span>(req.URL.Path, <span style=color:#ed9d13>&#34;/person/&#34;</span>), <span style=color:#3677a9>10</span>, <span style=color:#3677a9>64</span>)
		<span style=color:#6ab825;font-weight:700>if</span> err != <span style=color:#6ab825;font-weight:700>nil</span> {
			http.<span style=color:#447fcf>Error</span>(w, <span style=color:#ed9d13>&#34;Bad request&#34;</span>, http.StatusBadRequest)
			<span style=color:#6ab825;font-weight:700>return</span>
		}

		accept := req.Header.<span style=color:#447fcf>Get</span>(<span style=color:#ed9d13>&#34;Accept&#34;</span>)

		mu.<span style=color:#447fcf>Lock</span>()
		<span style=color:#6ab825;font-weight:700>defer</span> mu.<span style=color:#447fcf>Unlock</span>()
		<span style=color:#6ab825;font-weight:700>if</span> personByID[id] == <span style=color:#6ab825;font-weight:700>nil</span> {
			<span style=color:#447fcf>reply</span>(w, http.StatusNotFound, accept, Error{
				Mesg: <span style=color:#ed9d13>&#34;Person does not exist&#34;</span>,
				Code: http.StatusNotFound,
			})
			<span style=color:#6ab825;font-weight:700>return</span>
		}

		<span style=color:#6ab825;font-weight:700>switch</span> req.Method {
		<span style=color:#6ab825;font-weight:700>case</span> http.MethodGet:
			<span style=color:#447fcf>reply</span>(w, http.StatusOK, accept, personByID[id])
		<span style=color:#6ab825;font-weight:700>case</span> http.MethodDelete:
			<span style=color:#24909d>delete</span>(personByID, id)
			<span style=color:#447fcf>reply</span>(w, http.StatusNoContent, <span style=color:#ed9d13>&#34;&#34;</span>, <span style=color:#6ab825;font-weight:700>nil</span>)
		<span style=color:#6ab825;font-weight:700>default</span>:
			http.<span style=color:#447fcf>Error</span>(w, <span style=color:#ed9d13>&#34;Method not allowed&#34;</span>, http.StatusMethodNotAllowed)
		}
	})

	<span style=color:#999;font-style:italic>//
</span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// Let&#39;s test our API
</span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>//
</span><span style=color:#999;font-style:italic></span>	ta := tdhttp.<span style=color:#447fcf>NewTestAPI</span>(t, mux)

	<span style=color:#999;font-style:italic>// Re-usable custom operator to check Content-Type header
</span><span style=color:#999;font-style:italic></span>	contentTypeIs := <span style=color:#6ab825;font-weight:700>func</span>(ct <span style=color:#6ab825;font-weight:700>string</span>) td.TestDeep {
		<span style=color:#6ab825;font-weight:700>return</span> td.<span style=color:#447fcf>SuperMapOf</span>(http.Header{<span style=color:#ed9d13>&#34;Content-Type&#34;</span>: []<span style=color:#6ab825;font-weight:700>string</span>{ct}}, <span style=color:#6ab825;font-weight:700>nil</span>)
	}

	<span style=color:#999;font-style:italic>//
</span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// Person not found
</span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>//
</span><span style=color:#999;font-style:italic></span>	ta.<span style=color:#447fcf>Get</span>(<span style=color:#ed9d13>&#34;/person/42&#34;</span>, <span style=color:#ed9d13>&#34;Accept&#34;</span>, <span style=color:#ed9d13>&#34;application/json&#34;</span>).
		<span style=color:#447fcf>Name</span>(<span style=color:#ed9d13>&#34;GET /person/42 - JSON&#34;</span>).
		<span style=color:#447fcf>CmpStatus</span>(<span style=color:#3677a9>404</span>).
		<span style=color:#447fcf>CmpHeader</span>(<span style=color:#447fcf>contentTypeIs</span>(<span style=color:#ed9d13>&#34;application/json&#34;</span>)).
		<span style=color:#447fcf>CmpJSONBody</span>(Error{
			Mesg: <span style=color:#ed9d13>&#34;Person does not exist&#34;</span>,
			Code: <span style=color:#3677a9>404</span>,
		})
	t.<span style=color:#447fcf>Log</span>(<span style=color:#ed9d13>&#34;GET /person/42 - JSON:&#34;</span>, !ta.<span style=color:#447fcf>Failed</span>())

	ta.<span style=color:#447fcf>Get</span>(<span style=color:#ed9d13>&#34;/person/42&#34;</span>, <span style=color:#ed9d13>&#34;Accept&#34;</span>, <span style=color:#ed9d13>&#34;application/xml&#34;</span>).
		<span style=color:#447fcf>Name</span>(<span style=color:#ed9d13>&#34;GET /person/42 - XML&#34;</span>).
		<span style=color:#447fcf>CmpStatus</span>(<span style=color:#3677a9>404</span>).
		<span style=color:#447fcf>CmpHeader</span>(<span style=color:#447fcf>contentTypeIs</span>(<span style=color:#ed9d13>&#34;application/xml&#34;</span>)).
		<span style=color:#447fcf>CmpXMLBody</span>(Error{
			Mesg: <span style=color:#ed9d13>&#34;Person does not exist&#34;</span>,
			Code: <span style=color:#3677a9>404</span>,
		})
	t.<span style=color:#447fcf>Log</span>(<span style=color:#ed9d13>&#34;GET /person/42 - XML:&#34;</span>, !ta.<span style=color:#447fcf>Failed</span>())

	ta.<span style=color:#447fcf>Get</span>(<span style=color:#ed9d13>&#34;/person/42&#34;</span>, <span style=color:#ed9d13>&#34;Accept&#34;</span>, <span style=color:#ed9d13>&#34;text/plain&#34;</span>).
		<span style=color:#447fcf>Name</span>(<span style=color:#ed9d13>&#34;GET /person/42 - raw&#34;</span>).
		<span style=color:#447fcf>CmpStatus</span>(<span style=color:#3677a9>404</span>).
		<span style=color:#447fcf>CmpHeader</span>(<span style=color:#447fcf>contentTypeIs</span>(<span style=color:#ed9d13>&#34;text/plain&#34;</span>)).
		<span style=color:#447fcf>CmpBody</span>(<span style=color:#ed9d13>&#34;{Mesg:Person does not exist Code:404}&#34;</span>)
	t.<span style=color:#447fcf>Log</span>(<span style=color:#ed9d13>&#34;GET /person/42 - raw:&#34;</span>, !ta.<span style=color:#447fcf>Failed</span>())

	<span style=color:#999;font-style:italic>//
</span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// Create a Person
</span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>//
</span><span style=color:#999;font-style:italic></span>	<span style=color:#6ab825;font-weight:700>var</span> bobID <span style=color:#6ab825;font-weight:700>int64</span>
	ta.<span style=color:#447fcf>PostXML</span>(<span style=color:#ed9d13>&#34;/person&#34;</span>, Person{Name: <span style=color:#ed9d13>&#34;Bob&#34;</span>, Age: <span style=color:#3677a9>32</span>},
		<span style=color:#ed9d13>&#34;Accept&#34;</span>, <span style=color:#ed9d13>&#34;application/xml&#34;</span>).
		<span style=color:#447fcf>Name</span>(<span style=color:#ed9d13>&#34;POST /person - XML&#34;</span>).
		<span style=color:#447fcf>CmpStatus</span>(<span style=color:#3677a9>201</span>).
		<span style=color:#447fcf>CmpHeader</span>(<span style=color:#447fcf>contentTypeIs</span>(<span style=color:#ed9d13>&#34;application/xml&#34;</span>)).
		<span style=color:#447fcf>CmpXMLBody</span>(Person{ <span style=color:#999;font-style:italic>// using operator anchoring directly in litteral
</span><span style=color:#999;font-style:italic></span>			ID:        ta.<span style=color:#447fcf>A</span>(td.<span style=color:#447fcf>Catch</span>(&amp;bobID, td.<span style=color:#447fcf>NotZero</span>()), <span style=color:#24909d>int64</span>(<span style=color:#3677a9>0</span>)).(<span style=color:#6ab825;font-weight:700>int64</span>),
			Name:      <span style=color:#ed9d13>&#34;Bob&#34;</span>,
			Age:       <span style=color:#3677a9>32</span>,
			CreatedAt: ta.<span style=color:#447fcf>A</span>(td.<span style=color:#447fcf>Ptr</span>(td.<span style=color:#447fcf>Between</span>(ta.<span style=color:#447fcf>SentAt</span>(), time.<span style=color:#447fcf>Now</span>()))).(*time.Time),
		})
	t.<span style=color:#447fcf>Logf</span>(<span style=color:#ed9d13>&#34;POST /person - XML: %t → Bob ID=%d\n&#34;</span>, !ta.<span style=color:#447fcf>Failed</span>(), bobID)

	<span style=color:#6ab825;font-weight:700>var</span> aliceID <span style=color:#6ab825;font-weight:700>int64</span>
	ta.<span style=color:#447fcf>PostJSON</span>(<span style=color:#ed9d13>&#34;/person&#34;</span>, Person{Name: <span style=color:#ed9d13>&#34;Alice&#34;</span>, Age: <span style=color:#3677a9>35</span>},
		<span style=color:#ed9d13>&#34;Accept&#34;</span>, <span style=color:#ed9d13>&#34;application/json&#34;</span>).
		<span style=color:#447fcf>Name</span>(<span style=color:#ed9d13>&#34;POST /person - JSON&#34;</span>).
		<span style=color:#447fcf>CmpStatus</span>(<span style=color:#3677a9>201</span>).
		<span style=color:#447fcf>CmpHeader</span>(<span style=color:#447fcf>contentTypeIs</span>(<span style=color:#ed9d13>&#34;application/json&#34;</span>)).
		<span style=color:#447fcf>CmpJSONBody</span>(td.<span style=color:#447fcf>JSON</span>(<span style=color:#ed9d13>` // using JSON operator (yes comment allowed in JSON!)
</span><span style=color:#ed9d13>{
</span><span style=color:#ed9d13>  &#34;id&#34;:         $1,
</span><span style=color:#ed9d13>  &#34;name&#34;:       &#34;Alice&#34;,
</span><span style=color:#ed9d13>  &#34;age&#34;:        35,
</span><span style=color:#ed9d13>  &#34;created_at&#34;: $2
</span><span style=color:#ed9d13>}`</span>,
			td.<span style=color:#447fcf>Catch</span>(&amp;aliceID, td.<span style=color:#447fcf>NotZero</span>()),
			td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(date <span style=color:#6ab825;font-weight:700>string</span>) (time.Time, <span style=color:#6ab825;font-weight:700>error</span>) {
				<span style=color:#6ab825;font-weight:700>return</span> time.<span style=color:#447fcf>Parse</span>(time.RFC3339Nano, date)
			}, td.<span style=color:#447fcf>Between</span>(ta.<span style=color:#447fcf>SentAt</span>(), time.<span style=color:#447fcf>Now</span>()))))
	t.<span style=color:#447fcf>Logf</span>(<span style=color:#ed9d13>&#34;POST /person - JSON: %t → Alice ID=%d\n&#34;</span>, !ta.<span style=color:#447fcf>Failed</span>(), aliceID)

	<span style=color:#6ab825;font-weight:700>var</span> brittID <span style=color:#6ab825;font-weight:700>int64</span>
	ta.<span style=color:#447fcf>PostForm</span>(<span style=color:#ed9d13>&#34;/person&#34;</span>,
		url.Values{
			<span style=color:#ed9d13>&#34;name&#34;</span>: []<span style=color:#6ab825;font-weight:700>string</span>{<span style=color:#ed9d13>&#34;Britt&#34;</span>},
			<span style=color:#ed9d13>&#34;age&#34;</span>:  []<span style=color:#6ab825;font-weight:700>string</span>{<span style=color:#ed9d13>&#34;29&#34;</span>},
		},
		<span style=color:#ed9d13>&#34;Accept&#34;</span>, <span style=color:#ed9d13>&#34;text/plain&#34;</span>).
		<span style=color:#447fcf>Name</span>(<span style=color:#ed9d13>&#34;POST /person - raw&#34;</span>).
		<span style=color:#447fcf>CmpStatus</span>(<span style=color:#3677a9>201</span>).
		<span style=color:#447fcf>CmpHeader</span>(<span style=color:#447fcf>contentTypeIs</span>(<span style=color:#ed9d13>&#34;text/plain&#34;</span>)).
		<span style=color:#999;font-style:italic>// using Re (= Regexp) operator
</span><span style=color:#999;font-style:italic></span>		<span style=color:#447fcf>CmpBody</span>(td.<span style=color:#447fcf>Re</span>(<span style=color:#ed9d13>`\{ID:(\d+) Name:Britt Age:29 CreatedAt:.*\}\z`</span>,
			td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(groups []<span style=color:#6ab825;font-weight:700>string</span>) (<span style=color:#6ab825;font-weight:700>int64</span>, <span style=color:#6ab825;font-weight:700>error</span>) {
				<span style=color:#6ab825;font-weight:700>return</span> strconv.<span style=color:#447fcf>ParseInt</span>(groups[<span style=color:#3677a9>0</span>], <span style=color:#3677a9>10</span>, <span style=color:#3677a9>64</span>)
			}, td.<span style=color:#447fcf>Catch</span>(&amp;brittID, td.<span style=color:#447fcf>NotZero</span>()))))
	t.<span style=color:#447fcf>Logf</span>(<span style=color:#ed9d13>&#34;POST /person - raw: %t → Britt ID=%d\n&#34;</span>, !ta.<span style=color:#447fcf>Failed</span>(), brittID)

	<span style=color:#999;font-style:italic>//
</span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// Get a Person
</span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>//
</span><span style=color:#999;font-style:italic></span>	ta.<span style=color:#447fcf>Get</span>(fmt.<span style=color:#447fcf>Sprintf</span>(<span style=color:#ed9d13>&#34;/person/%d&#34;</span>, aliceID), <span style=color:#ed9d13>&#34;Accept&#34;</span>, <span style=color:#ed9d13>&#34;application/xml&#34;</span>).
		<span style=color:#447fcf>Name</span>(<span style=color:#ed9d13>&#34;GET Alice - XML (ID #%d)&#34;</span>, aliceID).
		<span style=color:#447fcf>CmpStatus</span>(<span style=color:#3677a9>200</span>).
		<span style=color:#447fcf>CmpHeader</span>(<span style=color:#447fcf>contentTypeIs</span>(<span style=color:#ed9d13>&#34;application/xml&#34;</span>)).
		<span style=color:#447fcf>CmpXMLBody</span>(td.<span style=color:#447fcf>SStruct</span>( <span style=color:#999;font-style:italic>// using SStruct operator
</span><span style=color:#999;font-style:italic></span>			Person{
				ID:   aliceID,
				Name: <span style=color:#ed9d13>&#34;Alice&#34;</span>,
				Age:  <span style=color:#3677a9>35</span>,
			},
			td.StructFields{
				<span style=color:#ed9d13>&#34;CreatedAt&#34;</span>: td.<span style=color:#447fcf>Ptr</span>(td.<span style=color:#447fcf>NotZero</span>()),
			},
		))
	t.<span style=color:#447fcf>Log</span>(<span style=color:#ed9d13>&#34;GET XML Alice:&#34;</span>, !ta.<span style=color:#447fcf>Failed</span>())

	ta.<span style=color:#447fcf>Get</span>(fmt.<span style=color:#447fcf>Sprintf</span>(<span style=color:#ed9d13>&#34;/person/%d&#34;</span>, aliceID), <span style=color:#ed9d13>&#34;Accept&#34;</span>, <span style=color:#ed9d13>&#34;application/json&#34;</span>).
		<span style=color:#447fcf>Name</span>(<span style=color:#ed9d13>&#34;GET Alice - JSON (ID #%d)&#34;</span>, aliceID).
		<span style=color:#447fcf>CmpStatus</span>(<span style=color:#3677a9>200</span>).
		<span style=color:#447fcf>CmpHeader</span>(<span style=color:#447fcf>contentTypeIs</span>(<span style=color:#ed9d13>&#34;application/json&#34;</span>)).
		<span style=color:#447fcf>CmpJSONBody</span>(td.<span style=color:#447fcf>JSON</span>(<span style=color:#ed9d13>` // using JSON operator (yes comment allowed in JSON!)
</span><span style=color:#ed9d13>{
</span><span style=color:#ed9d13>  &#34;id&#34;:         $1,
</span><span style=color:#ed9d13>  &#34;name&#34;:       &#34;Alice&#34;,
</span><span style=color:#ed9d13>  &#34;age&#34;:        35,
</span><span style=color:#ed9d13>  &#34;created_at&#34;: $2
</span><span style=color:#ed9d13>}`</span>,
			aliceID,
			td.<span style=color:#447fcf>Not</span>(td.<span style=color:#447fcf>Re</span>(<span style=color:#ed9d13>`^0001-01-01`</span>)), <span style=color:#999;font-style:italic>// time is not 0001-01-01… aka zero time.Time
</span><span style=color:#999;font-style:italic></span>		))
	t.<span style=color:#447fcf>Log</span>(<span style=color:#ed9d13>&#34;GET JSON Alice:&#34;</span>, !ta.<span style=color:#447fcf>Failed</span>())

	<span style=color:#999;font-style:italic>//
</span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// Delete a Person
</span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>//
</span><span style=color:#999;font-style:italic></span>	ta.<span style=color:#447fcf>Delete</span>(fmt.<span style=color:#447fcf>Sprintf</span>(<span style=color:#ed9d13>&#34;/person/%d&#34;</span>, aliceID), <span style=color:#6ab825;font-weight:700>nil</span>).
		<span style=color:#447fcf>Name</span>(<span style=color:#ed9d13>&#34;DELETE Alice (ID #%d)&#34;</span>, aliceID).
		<span style=color:#447fcf>CmpStatus</span>(<span style=color:#3677a9>204</span>).
		<span style=color:#447fcf>CmpHeader</span>(td.<span style=color:#447fcf>Not</span>(td.<span style=color:#447fcf>ContainsKey</span>(<span style=color:#ed9d13>&#34;Content-Type&#34;</span>))).
		<span style=color:#447fcf>NoBody</span>()
	t.<span style=color:#447fcf>Log</span>(<span style=color:#ed9d13>&#34;DELETE Alice:&#34;</span>, !ta.<span style=color:#447fcf>Failed</span>())

	<span style=color:#999;font-style:italic>// Check Alice is deleted
</span><span style=color:#999;font-style:italic></span>	ta.<span style=color:#447fcf>Get</span>(fmt.<span style=color:#447fcf>Sprintf</span>(<span style=color:#ed9d13>&#34;/person/%d&#34;</span>, aliceID), <span style=color:#ed9d13>&#34;Accept&#34;</span>, <span style=color:#ed9d13>&#34;application/json&#34;</span>).
		<span style=color:#447fcf>Name</span>(<span style=color:#ed9d13>&#34;GET (deleted) Alice - JSON (ID #%d)&#34;</span>, aliceID).
		<span style=color:#447fcf>CmpStatus</span>(<span style=color:#3677a9>404</span>).
		<span style=color:#447fcf>CmpHeader</span>(<span style=color:#447fcf>contentTypeIs</span>(<span style=color:#ed9d13>&#34;application/json&#34;</span>)).
		<span style=color:#447fcf>CmpJSONBody</span>(td.<span style=color:#447fcf>JSON</span>(<span style=color:#ed9d13>`
</span><span style=color:#ed9d13>{
</span><span style=color:#ed9d13>  &#34;message&#34;: &#34;Person does not exist&#34;,
</span><span style=color:#ed9d13>  &#34;code&#34;:    404
</span><span style=color:#ed9d13>}`</span>))
	t.<span style=color:#447fcf>Log</span>(<span style=color:#ed9d13>&#34;Alice is not found anymore:&#34;</span>, !ta.<span style=color:#447fcf>Failed</span>())
}
</code></pre></div>
</div>
</div>
<h2 id=helpers-utils-aka-tdutil>Helpers utils aka <code>tdutil</code></h2>
<p>To write helpers, some commonly used functions are shared in
<a href=https://pkg.go.dev/github.com/maxatome/go-testdeep/helpers/tdutil><code>tdutil</code></a>
package.</p>
<footer class=footline>
</footer>
</div>
</div>
<div id=navigation>
<a class="nav nav-prev" href=/operators/zero/ title=Zero> <i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/faq/ title=FAQ style=margin-right:0><i class="fa fa-chevron-right"></i></a>
</div>
</section>
<div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div>
</div>
<script src=/js/clipboard.min.js?1615795024></script>
<script src=/js/perfect-scrollbar.min.js?1615795024></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1615795024></script>
<script src=/js/jquery.sticky.js?1615795024></script>
<script src=/js/featherlight.min.js?1615795024></script>
<script src=/js/highlight.pack.js?1615795024></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src=/js/modernizr.custom-3.6.0.js?1615795024></script>
<script src=/js/learn.js?1615795024></script>
<script src=/js/hugo-learn.js?1615795024></script>
<link href=/mermaid/mermaid.css?1615795024 rel=stylesheet>
<script src=/mermaid/mermaid.js?1615795024></script>
<script>mermaid.initialize({startOnLoad:true});</script>
</body>
</html>