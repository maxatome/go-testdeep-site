<!doctype html><html lang=en class="js csstransforms3d">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=generator content="Hugo 0.111.3">
<meta name=description content>
<link rel=icon href=/images/favicon.png type=image/png>
<title>Smuggle :: go-testdeep</title><link href=/css/nucleus.css?1678884514 rel=stylesheet>
<link href=/css/fontawesome-all.min.css?1678884514 rel=stylesheet>
<link href=/css/hybrid.css?1678884514 rel=stylesheet>
<link href=/css/featherlight.min.css?1678884514 rel=stylesheet>
<link href=/css/perfect-scrollbar.min.css?1678884514 rel=stylesheet>
<link href=/css/auto-complete.css?1678884514 rel=stylesheet>
<link href=/css/atom-one-dark-reasonable.css?1678884514 rel=stylesheet>
<link href=/css/theme.css?1678884514 rel=stylesheet>
<link href=/css/hugo-theme.css?1678884514 rel=stylesheet>
<link href=/css/theme-green.css?1678884514 rel=stylesheet>
<script src=/js/jquery-3.3.1.min.js?1678884514></script>
<style>:root #header+#content>#left>#rlblock_left{display:none!important}:not(pre)>code+span.copy-to-clipboard{display:none}</style><meta name=google-site-verification content="I15BdfDU61eURsp8IywfU9hV8Rygaa4JsH-U8kKAxVs">
<style type=text/css>#body-inner pre{white-space:pre}</style></head><body data-url=/operators/smuggle/>
<nav id=sidebar>
<div id=header-wrapper>
<div id=header>
<a id=logo href=https://go-testdeep.zetta.rocks/><img src=https://go-testdeep.zetta.rocks//images/logo.svg></a>
</div><div class=searchbox>
<label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span>
</div><script type=text/javascript src=/js/lunr.min.js?1678884514></script>
<script type=text/javascript src=/js/auto-complete.js?1678884514></script>
<script type=text/javascript>var baseurl="https://go-testdeep.zetta.rocks/"</script>
<script type=text/javascript src=/js/search.js?1678884514></script>
</div><div class=highlightable>
<ul class=topics>
<li data-nav-id=/introduction/ title=Introduction class=dd-item>
<a href=/introduction/>
Introduction
</a>
</li><li data-nav-id=/example/ title=Tutorial class=dd-item>
<a href=/example/>
Tutorial
</a>
<ul>
<li data-nav-id=/example/using-testing/ title="Using testing package" class=dd-item>
<a href=/example/using-testing/>
Using testing package
</a>
</li><li data-nav-id=/example/basic-testdeep/ title="Basic go-testdeep approach" class=dd-item>
<a href=/example/basic-testdeep/>
Basic go-testdeep approach
</a>
</li><li data-nav-id=/example/advanced-testdeep/ title="Advanced go-testdeep technique" class=dd-item>
<a href=/example/advanced-testdeep/>
Advanced go-testdeep technique
</a>
</li><li data-nav-id=/example/td-cmp-shortcuts/ title="go-testdeep Cmp shortcuts" class=dd-item>
<a href=/example/td-cmp-shortcuts/>
go-testdeep Cmp shortcuts
</a>
</li><li data-nav-id=/example/td-t/ title="td.T type" class=dd-item>
<a href=/example/td-t/>
td.T type
</a>
</li><li data-nav-id=/example/anchoring/ title="Using anchoring" class=dd-item>
<a href=/example/anchoring/>
Using anchoring
</a>
</li><li data-nav-id=/example/using-json/ title="Using JSON" class=dd-item>
<a href=/example/using-json/>
Using JSON
</a>
</li></ul></li><li data-nav-id=/functions/ title=Functions class=dd-item>
<a href=/functions/>
Functions
</a>
<ul>
<li data-nav-id=/functions/td-t/ title=td.T class=dd-item>
<a href=/functions/td-t/>
td.T
</a>
</li></ul></li><li data-nav-id=/operators/ title=Operators class="dd-item
parent">
<a href=/operators/>
Operators
</a>
<ul>
<li data-nav-id=/operators/matrix/ title="Operators matrices" class=dd-item>
<a href=/operators/matrix/>
Operators matrices
</a>
</li><li data-nav-id=/operators/all/ title=All class=dd-item>
<a href=/operators/all/>
All
</a>
</li><li data-nav-id=/operators/any/ title=Any class=dd-item>
<a href=/operators/any/>
Any
</a>
</li><li data-nav-id=/operators/array/ title=Array class=dd-item>
<a href=/operators/array/>
Array
</a>
</li><li data-nav-id=/operators/arrayeach/ title=ArrayEach class=dd-item>
<a href=/operators/arrayeach/>
ArrayEach
</a>
</li><li data-nav-id=/operators/bag/ title=Bag class=dd-item>
<a href=/operators/bag/>
Bag
</a>
</li><li data-nav-id=/operators/between/ title=Between class=dd-item>
<a href=/operators/between/>
Between
</a>
</li><li data-nav-id=/operators/cap/ title=Cap class=dd-item>
<a href=/operators/cap/>
Cap
</a>
</li><li data-nav-id=/operators/catch/ title=Catch class=dd-item>
<a href=/operators/catch/>
Catch
</a>
</li><li data-nav-id=/operators/code/ title=Code class=dd-item>
<a href=/operators/code/>
Code
</a>
</li><li data-nav-id=/operators/contains/ title=Contains class=dd-item>
<a href=/operators/contains/>
Contains
</a>
</li><li data-nav-id=/operators/containskey/ title=ContainsKey class=dd-item>
<a href=/operators/containskey/>
ContainsKey
</a>
</li><li data-nav-id=/operators/delay/ title=Delay class=dd-item>
<a href=/operators/delay/>
Delay
</a>
</li><li data-nav-id=/operators/empty/ title=Empty class=dd-item>
<a href=/operators/empty/>
Empty
</a>
</li><li data-nav-id=/operators/erroris/ title=ErrorIs class=dd-item>
<a href=/operators/erroris/>
ErrorIs
</a>
</li><li data-nav-id=/operators/first/ title=First class=dd-item>
<a href=/operators/first/>
First
</a>
</li><li data-nav-id=/operators/grep/ title=Grep class=dd-item>
<a href=/operators/grep/>
Grep
</a>
</li><li data-nav-id=/operators/gt/ title=Gt class=dd-item>
<a href=/operators/gt/>
Gt
</a>
</li><li data-nav-id=/operators/gte/ title=Gte class=dd-item>
<a href=/operators/gte/>
Gte
</a>
</li><li data-nav-id=/operators/hasprefix/ title=HasPrefix class=dd-item>
<a href=/operators/hasprefix/>
HasPrefix
</a>
</li><li data-nav-id=/operators/hassuffix/ title=HasSuffix class=dd-item>
<a href=/operators/hassuffix/>
HasSuffix
</a>
</li><li data-nav-id=/operators/ignore/ title=Ignore class=dd-item>
<a href=/operators/ignore/>
Ignore
</a>
</li><li data-nav-id=/operators/isa/ title=Isa class=dd-item>
<a href=/operators/isa/>
Isa
</a>
</li><li data-nav-id=/operators/json/ title=JSON class=dd-item>
<a href=/operators/json/>
JSON
</a>
</li><li data-nav-id=/operators/jsonpointer/ title=JSONPointer class=dd-item>
<a href=/operators/jsonpointer/>
JSONPointer
</a>
</li><li data-nav-id=/operators/keys/ title=Keys class=dd-item>
<a href=/operators/keys/>
Keys
</a>
</li><li data-nav-id=/operators/last/ title=Last class=dd-item>
<a href=/operators/last/>
Last
</a>
</li><li data-nav-id=/operators/lax/ title=Lax class=dd-item>
<a href=/operators/lax/>
Lax
</a>
</li><li data-nav-id=/operators/len/ title=Len class=dd-item>
<a href=/operators/len/>
Len
</a>
</li><li data-nav-id=/operators/lt/ title=Lt class=dd-item>
<a href=/operators/lt/>
Lt
</a>
</li><li data-nav-id=/operators/lte/ title=Lte class=dd-item>
<a href=/operators/lte/>
Lte
</a>
</li><li data-nav-id=/operators/map/ title=Map class=dd-item>
<a href=/operators/map/>
Map
</a>
</li><li data-nav-id=/operators/mapeach/ title=MapEach class=dd-item>
<a href=/operators/mapeach/>
MapEach
</a>
</li><li data-nav-id=/operators/n/ title=N class=dd-item>
<a href=/operators/n/>
N
</a>
</li><li data-nav-id=/operators/nan/ title=NaN class=dd-item>
<a href=/operators/nan/>
NaN
</a>
</li><li data-nav-id=/operators/nil/ title=Nil class=dd-item>
<a href=/operators/nil/>
Nil
</a>
</li><li data-nav-id=/operators/none/ title=None class=dd-item>
<a href=/operators/none/>
None
</a>
</li><li data-nav-id=/operators/not/ title=Not class=dd-item>
<a href=/operators/not/>
Not
</a>
</li><li data-nav-id=/operators/notany/ title=NotAny class=dd-item>
<a href=/operators/notany/>
NotAny
</a>
</li><li data-nav-id=/operators/notempty/ title=NotEmpty class=dd-item>
<a href=/operators/notempty/>
NotEmpty
</a>
</li><li data-nav-id=/operators/notnan/ title=NotNaN class=dd-item>
<a href=/operators/notnan/>
NotNaN
</a>
</li><li data-nav-id=/operators/notnil/ title=NotNil class=dd-item>
<a href=/operators/notnil/>
NotNil
</a>
</li><li data-nav-id=/operators/notzero/ title=NotZero class=dd-item>
<a href=/operators/notzero/>
NotZero
</a>
</li><li data-nav-id=/operators/pptr/ title=PPtr class=dd-item>
<a href=/operators/pptr/>
PPtr
</a>
</li><li data-nav-id=/operators/ptr/ title=Ptr class=dd-item>
<a href=/operators/ptr/>
Ptr
</a>
</li><li data-nav-id=/operators/re/ title=Re class=dd-item>
<a href=/operators/re/>
Re
</a>
</li><li data-nav-id=/operators/reall/ title=ReAll class=dd-item>
<a href=/operators/reall/>
ReAll
</a>
</li><li data-nav-id=/operators/recv/ title=Recv class=dd-item>
<a href=/operators/recv/>
Recv
</a>
</li><li data-nav-id=/operators/set/ title=Set class=dd-item>
<a href=/operators/set/>
Set
</a>
</li><li data-nav-id=/operators/shallow/ title=Shallow class=dd-item>
<a href=/operators/shallow/>
Shallow
</a>
</li><li data-nav-id=/operators/slice/ title=Slice class=dd-item>
<a href=/operators/slice/>
Slice
</a>
</li><li data-nav-id=/operators/smuggle/ title=Smuggle class="dd-item active">
<a href=/operators/smuggle/>
Smuggle
</a>
</li><li data-nav-id=/operators/sstruct/ title=SStruct class=dd-item>
<a href=/operators/sstruct/>
SStruct
</a>
</li><li data-nav-id=/operators/string/ title=String class=dd-item>
<a href=/operators/string/>
String
</a>
</li><li data-nav-id=/operators/struct/ title=Struct class=dd-item>
<a href=/operators/struct/>
Struct
</a>
</li><li data-nav-id=/operators/subbagof/ title=SubBagOf class=dd-item>
<a href=/operators/subbagof/>
SubBagOf
</a>
</li><li data-nav-id=/operators/subjsonof/ title=SubJSONOf class=dd-item>
<a href=/operators/subjsonof/>
SubJSONOf
</a>
</li><li data-nav-id=/operators/submapof/ title=SubMapOf class=dd-item>
<a href=/operators/submapof/>
SubMapOf
</a>
</li><li data-nav-id=/operators/subsetof/ title=SubSetOf class=dd-item>
<a href=/operators/subsetof/>
SubSetOf
</a>
</li><li data-nav-id=/operators/superbagof/ title=SuperBagOf class=dd-item>
<a href=/operators/superbagof/>
SuperBagOf
</a>
</li><li data-nav-id=/operators/superjsonof/ title=SuperJSONOf class=dd-item>
<a href=/operators/superjsonof/>
SuperJSONOf
</a>
</li><li data-nav-id=/operators/supermapof/ title=SuperMapOf class=dd-item>
<a href=/operators/supermapof/>
SuperMapOf
</a>
</li><li data-nav-id=/operators/supersetof/ title=SuperSetOf class=dd-item>
<a href=/operators/supersetof/>
SuperSetOf
</a>
</li><li data-nav-id=/operators/supersliceof/ title=SuperSliceOf class=dd-item>
<a href=/operators/supersliceof/>
SuperSliceOf
</a>
</li><li data-nav-id=/operators/tag/ title=Tag class=dd-item>
<a href=/operators/tag/>
Tag
</a>
</li><li data-nav-id=/operators/trunctime/ title=TruncTime class=dd-item>
<a href=/operators/trunctime/>
TruncTime
</a>
</li><li data-nav-id=/operators/values/ title=Values class=dd-item>
<a href=/operators/values/>
Values
</a>
</li><li data-nav-id=/operators/zero/ title=Zero class=dd-item>
<a href=/operators/zero/>
Zero
</a>
</li></ul></li><li data-nav-id=/helpers/ title=Helpers class=dd-item>
<a href=/helpers/>
Helpers
</a>
</li><li data-nav-id=/faq/ title=FAQ class=dd-item>
<a href=/faq/>
FAQ
</a>
</li></ul><section id=shortcuts>
<h3>More</h3><ul>
<li>
<a class=padding href=https://go-testdeep.zetta.rocks/prez><i class='fab fa-slideshare'></i>&nbsp;Presentation</a>
</li><li>
<a class=padding href=https://github.com/maxatome/go-testdeep><i class='fab fa-github'></i>&nbsp;Github repo</a>
</li><li>
<a class=padding href=https://pkg.go.dev/github.com/maxatome/go-testdeep/td><i class='fas fa-book'></i>&nbsp;godoc</a>
</li><li>
<a class=padding href=https://pkg.go.dev/github.com/maxatome/go-testdeep/helpers/tdhttp><i class='fas fa-book'></i>&nbsp;godoc API tester — tdhttp</a>
</li><li>
<a class=padding href=https://pkg.go.dev/github.com/maxatome/go-testdeep/helpers/tdsuite><i class='fas fa-book'></i>&nbsp;godoc testing suite — tdsuite</a>
</li><li>
<a class=padding href=https://pkg.go.dev/github.com/maxatome/go-testdeep/helpers/tdutil><i class='fas fa-book'></i>&nbsp;godoc helpers utils — tdutil</a>
</li></ul></section><section id=footer>
<p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body>
<div id=overlay></div><div class="padding highlightable">
<div>
<div id=top-bar>
<div id=breadcrumbs itemscope itemtype=http://schema.org/BreadcrumbList>
<span id=sidebar-toggle-span>
<a href=# id=sidebar-toggle data-sidebar-toggle>
<i class="fas fa-bars"></i>
</a>
</span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>
<span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/> <span itemprop=name>go-testdeep</span><meta itemprop=position content="1"></a></span> > <span itemscope itemprop=itemListElement itemtype=http://schema.org/ListItem><a itemprop=item href=/operators/> <span itemprop=name>Operators</span><meta itemprop=position content="2"></a></span> > Smuggle
</span>
</div><div class=progress>
<div class=wrapper>
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#examples>Examples</a></li></ul></li><li><a href=#cmpsmuggle-shortcut>CmpSmuggle shortcut</a>
<ul>
<li><a href=#examples-1>Examples</a></li></ul></li><li><a href=#tsmuggle-shortcut>T.Smuggle shortcut</a>
<ul>
<li><a href=#examples-2>Examples</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags>
</div><div id=body-inner>
<h1>
Smuggle
</h1><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#6ab825;font-weight:700>func</span> <span style=color:#447fcf>Smuggle</span>(fn, expectedValue any) TestDeep
</span></span></code></pre></div><p>Smuggle operator allows to change data contents or mutate it into
another type before stepping down in favor of generic comparison
process. Of course it is a <a href=/operators/#smuggler-operators>smuggler operator</a>. So <em>fn</em> is a function
that must take one parameter whose type must be convertible to the
type of the compared value.</p><p>As convenient shortcuts, <em>fn</em> can be a <code>string</code> specifying a
fields-path through structs, maps & slices, or <code>any</code> other type, in
this case a simple cast is done (see below for details).</p><p><em>fn</em> must return at least one value. These value will be compared as is
to <em>expectedValue</em>, here integer 28:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#ed9d13>&#34;0028&#34;</span>,
</span></span><span style=display:flex><span>  td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(value <span style=color:#6ab825;font-weight:700>string</span>) <span style=color:#6ab825;font-weight:700>int</span> {
</span></span><span style=display:flex><span>    num, _ := strconv.<span style=color:#447fcf>Atoi</span>(value)
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>return</span> num
</span></span><span style=display:flex><span>  }, <span style=color:#3677a9>28</span>),
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>or using an other <a href=/operators/>TestDeep operator</a>, here <a href=/operators/between/><code>Between</code></a>(28, 30):</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#ed9d13>&#34;0029&#34;</span>,
</span></span><span style=display:flex><span>  td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(value <span style=color:#6ab825;font-weight:700>string</span>) <span style=color:#6ab825;font-weight:700>int</span> {
</span></span><span style=display:flex><span>    num, _ := strconv.<span style=color:#447fcf>Atoi</span>(value)
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>return</span> num
</span></span><span style=display:flex><span>  }, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>28</span>, <span style=color:#3677a9>30</span>)),
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p><em>fn</em> can return a second boolean value, used to tell that a problem
occurred and so stop the comparison:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#ed9d13>&#34;0029&#34;</span>,
</span></span><span style=display:flex><span>  td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(value <span style=color:#6ab825;font-weight:700>string</span>) (<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#6ab825;font-weight:700>bool</span>) {
</span></span><span style=display:flex><span>    num, err := strconv.<span style=color:#447fcf>Atoi</span>(value)
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>return</span> num, err == <span style=color:#6ab825;font-weight:700>nil</span>
</span></span><span style=display:flex><span>  }, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>28</span>, <span style=color:#3677a9>30</span>)),
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p><em>fn</em> can return a third <code>string</code> value which is used to describe the
test when a problem occurred (false second boolean value):</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#ed9d13>&#34;0029&#34;</span>,
</span></span><span style=display:flex><span>  td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(value <span style=color:#6ab825;font-weight:700>string</span>) (<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#6ab825;font-weight:700>bool</span>, <span style=color:#6ab825;font-weight:700>string</span>) {
</span></span><span style=display:flex><span>    num, err := strconv.<span style=color:#447fcf>Atoi</span>(value)
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>if</span> err != <span style=color:#6ab825;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>      <span style=color:#6ab825;font-weight:700>return</span> <span style=color:#3677a9>0</span>, <span style=color:#6ab825;font-weight:700>false</span>, <span style=color:#ed9d13>&#34;string must contain a number&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>return</span> num, <span style=color:#6ab825;font-weight:700>true</span>, <span style=color:#ed9d13>&#34;&#34;</span>
</span></span><span style=display:flex><span>  }, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>28</span>, <span style=color:#3677a9>30</span>)),
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>Instead of returning (X, <code>bool</code>) or (X, <code>bool</code>, <code>string</code>), <em>fn</em> can
return (X, <a href=https://pkg.go.dev/builtin#error><code>error</code></a>). When a problem occurs, the returned <a href=https://pkg.go.dev/builtin#error><code>error</code></a> is
non-<code>nil</code>, as in:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#ed9d13>&#34;0029&#34;</span>,
</span></span><span style=display:flex><span>  td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(value <span style=color:#6ab825;font-weight:700>string</span>) (<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#6ab825;font-weight:700>error</span>) {
</span></span><span style=display:flex><span>    num, err := strconv.<span style=color:#447fcf>Atoi</span>(value)
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>return</span> num, err
</span></span><span style=display:flex><span>  }, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>28</span>, <span style=color:#3677a9>30</span>)),
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>Which can be simplified to:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#ed9d13>&#34;0029&#34;</span>, td.<span style=color:#447fcf>Smuggle</span>(strconv.Atoi, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>28</span>, <span style=color:#3677a9>30</span>)))
</span></span></code></pre></div><p>Imagine you want to compare that the Year of a date is between 2010
and 2020:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>td.<span style=color:#447fcf>Cmp</span>(t, time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2015</span>, time.May, <span style=color:#3677a9>1</span>, <span style=color:#3677a9>1</span>, <span style=color:#3677a9>2</span>, <span style=color:#3677a9>3</span>, <span style=color:#3677a9>0</span>, time.UTC),
</span></span><span style=display:flex><span>  td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(date time.Time) <span style=color:#6ab825;font-weight:700>int</span> { <span style=color:#6ab825;font-weight:700>return</span> date.<span style=color:#447fcf>Year</span>() },
</span></span><span style=display:flex><span>    td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>2010</span>, <span style=color:#3677a9>2020</span>)),
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>In this case the data location forwarded to next test will be
something like &ldquo;DATA.MyTimeField&rdquo;, but you can act on it
too by returning a <a href=https://pkg.go.dev/github.com/maxatome/go-testdeep/td#SmuggledGot><code>SmuggledGot</code></a> struct (by value or by address):</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>td.<span style=color:#447fcf>Cmp</span>(t, time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2015</span>, time.May, <span style=color:#3677a9>1</span>, <span style=color:#3677a9>1</span>, <span style=color:#3677a9>2</span>, <span style=color:#3677a9>3</span>, <span style=color:#3677a9>0</span>, time.UTC),
</span></span><span style=display:flex><span>  td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(date time.Time) SmuggledGot {
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>return</span> SmuggledGot{
</span></span><span style=display:flex><span>      Name: <span style=color:#ed9d13>&#34;Year&#34;</span>,
</span></span><span style=display:flex><span>      Got:  date.<span style=color:#447fcf>Year</span>(),
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>2010</span>, <span style=color:#3677a9>2020</span>)),
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>then the data location forwarded to next test will be something like
&ldquo;DATA.MyTimeField.Year&rdquo;. The &ldquo;.&rdquo; between the current path (here
&ldquo;DATA.MyTimeField&rdquo;) and the returned Name &ldquo;Year&rdquo; is automatically
added when Name starts with a Letter.</p><p>Note that <a href=https://pkg.go.dev/github.com/maxatome/go-testdeep/td#SmuggledGot><code>SmuggledGot</code></a> and <a href=https://pkg.go.dev/github.com/maxatome/go-testdeep/td#SmuggledGot><code>*SmuggledGot</code></a> returns are treated
equally, and they are only used when <em>fn</em> has only one returned value
or when the second boolean returned value is true.</p><p>Of course, all cases can go together:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#999;font-style:italic>// Accepts a &#34;YYYY/mm/DD HH:MM:SS&#34; string to produce a time.Time and tests
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// whether this date is contained between 2 hours before now and now.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#ed9d13>&#34;2020-01-25 12:13:14&#34;</span>,
</span></span><span style=display:flex><span>  td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(date <span style=color:#6ab825;font-weight:700>string</span>) (*SmuggledGot, <span style=color:#6ab825;font-weight:700>bool</span>, <span style=color:#6ab825;font-weight:700>string</span>) {
</span></span><span style=display:flex><span>    date, err := time.<span style=color:#447fcf>Parse</span>(<span style=color:#ed9d13>&#34;2006/01/02 15:04:05&#34;</span>, date)
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>if</span> err != <span style=color:#6ab825;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>      <span style=color:#6ab825;font-weight:700>return</span> <span style=color:#6ab825;font-weight:700>nil</span>, <span style=color:#6ab825;font-weight:700>false</span>, <span style=color:#ed9d13>`date must conform to &#34;YYYY/mm/DD HH:MM:SS&#34; format`</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>return</span> &amp;SmuggledGot{
</span></span><span style=display:flex><span>      Name: <span style=color:#ed9d13>&#34;Date&#34;</span>,
</span></span><span style=display:flex><span>      Got:  date,
</span></span><span style=display:flex><span>    }, <span style=color:#6ab825;font-weight:700>true</span>, <span style=color:#ed9d13>&#34;&#34;</span>
</span></span><span style=display:flex><span>  }, td.<span style=color:#447fcf>Between</span>(time.<span style=color:#447fcf>Now</span>().<span style=color:#447fcf>Add</span>(-<span style=color:#3677a9>2</span>*time.Hour), time.<span style=color:#447fcf>Now</span>())),
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>or:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#999;font-style:italic>// Accepts a &#34;YYYY/mm/DD HH:MM:SS&#34; string to produce a time.Time and tests
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// whether this date is contained between 2 hours before now and now.
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#ed9d13>&#34;2020-01-25 12:13:14&#34;</span>,
</span></span><span style=display:flex><span>  td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(date <span style=color:#6ab825;font-weight:700>string</span>) (*SmuggledGot, <span style=color:#6ab825;font-weight:700>error</span>) {
</span></span><span style=display:flex><span>    date, err := time.<span style=color:#447fcf>Parse</span>(<span style=color:#ed9d13>&#34;2006/01/02 15:04:05&#34;</span>, date)
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>if</span> err != <span style=color:#6ab825;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>      <span style=color:#6ab825;font-weight:700>return</span> <span style=color:#6ab825;font-weight:700>nil</span>, err
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>return</span> &amp;SmuggledGot{
</span></span><span style=display:flex><span>      Name: <span style=color:#ed9d13>&#34;Date&#34;</span>,
</span></span><span style=display:flex><span>      Got:  date,
</span></span><span style=display:flex><span>    }, <span style=color:#6ab825;font-weight:700>nil</span>
</span></span><span style=display:flex><span>  }, td.<span style=color:#447fcf>Between</span>(time.<span style=color:#447fcf>Now</span>().<span style=color:#447fcf>Add</span>(-<span style=color:#3677a9>2</span>*time.Hour), time.<span style=color:#447fcf>Now</span>())),
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>Smuggle can also be used to access a struct field embedded in
several struct layers.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#6ab825;font-weight:700>type</span> A <span style=color:#6ab825;font-weight:700>struct</span>{ Num <span style=color:#6ab825;font-weight:700>int</span> }
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>type</span> B <span style=color:#6ab825;font-weight:700>struct</span>{ As <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>string</span>]*A }
</span></span><span style=display:flex><span><span style=color:#6ab825;font-weight:700>type</span> C <span style=color:#6ab825;font-weight:700>struct</span>{ B B }
</span></span><span style=display:flex><span>got := C{B: B{As: <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>string</span>]*A{<span style=color:#ed9d13>&#34;foo&#34;</span>: {Num: <span style=color:#3677a9>12</span>}}}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// Tests that got.B.A.Num is 12
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>td.<span style=color:#447fcf>Cmp</span>(t, got,
</span></span><span style=display:flex><span>  td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(c C) <span style=color:#6ab825;font-weight:700>int</span> {
</span></span><span style=display:flex><span>    <span style=color:#6ab825;font-weight:700>return</span> c.B.As[<span style=color:#ed9d13>&#34;foo&#34;</span>].Num
</span></span><span style=display:flex><span>  }, <span style=color:#3677a9>12</span>))
</span></span></code></pre></div><p>As brought up above, a fields-path can be passed as <em>fn</em> value
instead of a function pointer. Using this feature, the <a href=https://pkg.go.dev/github.com/maxatome/go-testdeep/td#Cmp><code>Cmp</code></a>
call in the above example can be rewritten as follows:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#999;font-style:italic>// Tests that got.B.As[&#34;foo&#34;].Num is 12
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>td.<span style=color:#447fcf>Cmp</span>(t, got, td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#ed9d13>&#34;B.As[foo].Num&#34;</span>, <span style=color:#3677a9>12</span>))
</span></span></code></pre></div><p>Contrary to <a href=/operators/jsonpointer/><code>JSONPointer</code></a> operator, private fields can be
followed. Arrays, slices and maps work using the index/key inside
square brackets (e.g. [12] or [foo]). Maps work only for simple key
types (<code>string</code> or numbers), without "" when using strings
(e.g. [foo]).</p><p>Behind the scenes, a temporary function is automatically created to
achieve the same goal, but add some checks against <code>nil</code> values and
auto-dereference interfaces and pointers, even on several levels,
like in:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#6ab825;font-weight:700>type</span> A <span style=color:#6ab825;font-weight:700>struct</span>{ N any }
</span></span><span style=display:flex><span>num := <span style=color:#3677a9>12</span>
</span></span><span style=display:flex><span>pnum := &amp;num
</span></span><span style=display:flex><span>td.<span style=color:#447fcf>Cmp</span>(t, A{N: &amp;pnum}, td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#ed9d13>&#34;N&#34;</span>, <span style=color:#3677a9>12</span>))
</span></span></code></pre></div><p>Last but not least, a simple type can be passed as <em>fn</em> to operate
a cast, handling specifically strings and slices of bytes:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#ed9d13>`{&#34;foo&#34;:1}`</span>, td.<span style=color:#447fcf>Smuggle</span>(json.RawMessage{}, td.<span style=color:#447fcf>JSON</span>(<span style=color:#ed9d13>`{&#34;foo&#34;:1}`</span>)))
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// or equally
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#ed9d13>`{&#34;foo&#34;:1}`</span>, td.<span style=color:#447fcf>Smuggle</span>(json.<span style=color:#447fcf>RawMessage</span>(<span style=color:#6ab825;font-weight:700>nil</span>), td.<span style=color:#447fcf>JSON</span>(<span style=color:#ed9d13>`{&#34;foo&#34;:1}`</span>)))
</span></span></code></pre></div><p>converts on the fly a <code>string</code> to a <a href=https://pkg.go.dev/encoding/json#RawMessage>json.RawMessage</a> so <a href=/operators/json/><code>JSON</code></a> operator
can parse it as JSON. This is mostly a shortcut for:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#ed9d13>`{&#34;foo&#34;:1}`</span>, td.<span style=color:#447fcf>Smuggle</span>(
</span></span><span style=display:flex><span>  <span style=color:#6ab825;font-weight:700>func</span>(r json.RawMessage) json.RawMessage { <span style=color:#6ab825;font-weight:700>return</span> r },
</span></span><span style=display:flex><span>  td.<span style=color:#447fcf>JSON</span>(<span style=color:#ed9d13>`{&#34;foo&#34;:1}`</span>)))
</span></span></code></pre></div><p>except that for strings and slices of bytes (like here), it accepts
<a href=https://pkg.go.dev/io#Reader><code>io.Reader</code></a> interface too:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#6ab825;font-weight:700>var</span> body io.Reader
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// …
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>td.<span style=color:#447fcf>Cmp</span>(t, body, td.<span style=color:#447fcf>Smuggle</span>(json.RawMessage{}, td.<span style=color:#447fcf>JSON</span>(<span style=color:#ed9d13>`{&#34;foo&#34;:1}`</span>)))
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>// or equally
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>td.<span style=color:#447fcf>Cmp</span>(t, body, td.<span style=color:#447fcf>Smuggle</span>(json.<span style=color:#447fcf>RawMessage</span>(<span style=color:#6ab825;font-weight:700>nil</span>), td.<span style=color:#447fcf>JSON</span>(<span style=color:#ed9d13>`{&#34;foo&#34;:1}`</span>)))
</span></span></code></pre></div><p>This last example allows to easily inject body content into JSON
operator.</p><p>The difference between Smuggle and <a href=/operators/code/><code>Code</code></a> operators is that <a href=/operators/code/><code>Code</code></a>
is used to do a final comparison while Smuggle transforms the data
and then steps down in favor of generic comparison
process. Moreover, the type accepted as input for the function is
more lax to facilitate the writing of tests (e.g. the function can
accept a <code>float64</code> and the got value be an <code>int</code>). See examples. On the
other hand, the output type is strict and must match exactly the
expected value type. The fields-path <code>string</code> <em>fn</em> shortcut and the
cast feature are not available with <a href=/operators/code/><code>Code</code></a> operator.</p><p><a href=/operators/#typebehind-method><code>TypeBehind</code></a> method returns the <a href=https://pkg.go.dev/reflect#Type><code>reflect.Type</code></a> of only parameter of
<em>fn</em>. For the case where <em>fn</em> is a fields-path, it is always
<code>any</code>, as the type can not be known in advance.</p><blockquote>
<p>See also <a href=/operators/code/><code>Code</code></a> and <a href=/operators/jsonpointer/><code>JSONPointer</code></a>.</p></blockquote><blockquote>
<p>See also <a href=https://pkg.go.dev/github.com/maxatome/go-testdeep/td#Smuggle> Smuggle godoc</a>.</p></blockquote><h3 id=examples>Examples</h3><p>
<div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Convert example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := &amp;testing.T{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	got := <span style=color:#24909d>int64</span>(<span style=color:#3677a9>123</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok := td.<span style=color:#447fcf>Cmp</span>(t, got,
</span></span><span style=display:flex><span>		td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(n <span style=color:#6ab825;font-weight:700>int64</span>) <span style=color:#6ab825;font-weight:700>int</span> { <span style=color:#6ab825;font-weight:700>return</span> <span style=color:#24909d>int</span>(n) }, <span style=color:#3677a9>123</span>),
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;checks int64 got against an int value&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok = td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#ed9d13>&#34;123&#34;</span>,
</span></span><span style=display:flex><span>		td.<span style=color:#447fcf>Smuggle</span>(
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>func</span>(numStr <span style=color:#6ab825;font-weight:700>string</span>) (<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#6ab825;font-weight:700>bool</span>) {
</span></span><span style=display:flex><span>				n, err := strconv.<span style=color:#447fcf>Atoi</span>(numStr)
</span></span><span style=display:flex><span>				<span style=color:#6ab825;font-weight:700>return</span> n, err == <span style=color:#6ab825;font-weight:700>nil</span>
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>			td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>120</span>, <span style=color:#3677a9>130</span>)),
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok = td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#ed9d13>&#34;123&#34;</span>,
</span></span><span style=display:flex><span>		td.<span style=color:#447fcf>Smuggle</span>(
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>func</span>(numStr <span style=color:#6ab825;font-weight:700>string</span>) (<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#6ab825;font-weight:700>bool</span>, <span style=color:#6ab825;font-weight:700>string</span>) {
</span></span><span style=display:flex><span>				n, err := strconv.<span style=color:#447fcf>Atoi</span>(numStr)
</span></span><span style=display:flex><span>				<span style=color:#6ab825;font-weight:700>if</span> err != <span style=color:#6ab825;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>					<span style=color:#6ab825;font-weight:700>return</span> <span style=color:#3677a9>0</span>, <span style=color:#6ab825;font-weight:700>false</span>, <span style=color:#ed9d13>&#34;string must contain a number&#34;</span>
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>				<span style=color:#6ab825;font-weight:700>return</span> n, <span style=color:#6ab825;font-weight:700>true</span>, <span style=color:#ed9d13>&#34;&#34;</span>
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>			td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>120</span>, <span style=color:#3677a9>130</span>)),
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok = td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#ed9d13>&#34;123&#34;</span>,
</span></span><span style=display:flex><span>		td.<span style=color:#447fcf>Smuggle</span>(
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>func</span>(numStr <span style=color:#6ab825;font-weight:700>string</span>) (<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#6ab825;font-weight:700>error</span>) { <span style=color:#999;font-style:italic>//nolint: gocritic
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>				<span style=color:#6ab825;font-weight:700>return</span> strconv.<span style=color:#447fcf>Atoi</span>(numStr)
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>			td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>120</span>, <span style=color:#3677a9>130</span>)),
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Short version :)
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok = td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#ed9d13>&#34;123&#34;</span>,
</span></span><span style=display:flex><span>		td.<span style=color:#447fcf>Smuggle</span>(strconv.Atoi, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>120</span>, <span style=color:#3677a9>130</span>)),
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Lax example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := &amp;testing.T{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// got is an int16 and Smuggle func input is an int64: it is OK
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	got := <span style=color:#24909d>int</span>(<span style=color:#3677a9>123</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok := td.<span style=color:#447fcf>Cmp</span>(t, got,
</span></span><span style=display:flex><span>		td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(n <span style=color:#6ab825;font-weight:700>int64</span>) <span style=color:#6ab825;font-weight:700>uint32</span> { <span style=color:#6ab825;font-weight:700>return</span> <span style=color:#24909d>uint32</span>(n) }, <span style=color:#24909d>uint32</span>(<span style=color:#3677a9>123</span>)))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;got int16(123) → smuggle via int64 → uint32(123):&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// got int16(123) → smuggle via int64 → uint32(123): true
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Auto_unmarshal example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := &amp;testing.T{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Automatically json.Unmarshal to compare
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	got := []<span style=color:#24909d>byte</span>(<span style=color:#ed9d13>`{&#34;a&#34;:1,&#34;b&#34;:2}`</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok := td.<span style=color:#447fcf>Cmp</span>(t, got,
</span></span><span style=display:flex><span>		td.<span style=color:#447fcf>Smuggle</span>(
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>func</span>(b json.RawMessage) (r <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>string</span>]<span style=color:#6ab825;font-weight:700>int</span>, err <span style=color:#6ab825;font-weight:700>error</span>) {
</span></span><span style=display:flex><span>				err = json.<span style=color:#447fcf>Unmarshal</span>(b, &amp;r)
</span></span><span style=display:flex><span>				<span style=color:#6ab825;font-weight:700>return</span>
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>string</span>]<span style=color:#6ab825;font-weight:700>int</span>{
</span></span><span style=display:flex><span>				<span style=color:#ed9d13>&#34;a&#34;</span>: <span style=color:#3677a9>1</span>,
</span></span><span style=display:flex><span>				<span style=color:#ed9d13>&#34;b&#34;</span>: <span style=color:#3677a9>2</span>,
</span></span><span style=display:flex><span>			}))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;JSON contents is OK:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// JSON contents is OK: true
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Cast example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := &amp;testing.T{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// A string containing JSON
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	got := <span style=color:#ed9d13>`{ &#34;foo&#34;: 123 }`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Automatically cast a string to a json.RawMessage so td.JSON can operate
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok := td.<span style=color:#447fcf>Cmp</span>(t, got,
</span></span><span style=display:flex><span>		td.<span style=color:#447fcf>Smuggle</span>(json.RawMessage{}, td.<span style=color:#447fcf>JSON</span>(<span style=color:#ed9d13>`{&#34;foo&#34;:123}`</span>)))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;JSON contents in string is OK:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Automatically read from io.Reader to a json.RawMessage
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok = td.<span style=color:#447fcf>Cmp</span>(t, bytes.<span style=color:#447fcf>NewReader</span>([]<span style=color:#24909d>byte</span>(got)),
</span></span><span style=display:flex><span>		td.<span style=color:#447fcf>Smuggle</span>(json.RawMessage{}, td.<span style=color:#447fcf>JSON</span>(<span style=color:#ed9d13>`{&#34;foo&#34;:123}`</span>)))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;JSON contents just read is OK:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// JSON contents in string is OK: true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// JSON contents just read is OK: true
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Complex example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := &amp;testing.T{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// No end date but a start date and a duration
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#6ab825;font-weight:700>type</span> StartDuration <span style=color:#6ab825;font-weight:700>struct</span> {
</span></span><span style=display:flex><span>		StartDate time.Time
</span></span><span style=display:flex><span>		Duration  time.Duration
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Checks that end date is between 17th and 19th February both at 0h
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// for each of these durations in hours
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>for</span> _, duration := <span style=color:#6ab825;font-weight:700>range</span> []time.Duration{<span style=color:#3677a9>48</span> * time.Hour, <span style=color:#3677a9>72</span> * time.Hour, <span style=color:#3677a9>96</span> * time.Hour} {
</span></span><span style=display:flex><span>		got := StartDuration{
</span></span><span style=display:flex><span>			StartDate: time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2018</span>, time.February, <span style=color:#3677a9>14</span>, <span style=color:#3677a9>12</span>, <span style=color:#3677a9>13</span>, <span style=color:#3677a9>14</span>, <span style=color:#3677a9>0</span>, time.UTC),
</span></span><span style=display:flex><span>			Duration:  duration,
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#999;font-style:italic>// Simplest way, but in case of Between() failure, error will be bound
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>		<span style=color:#999;font-style:italic>// to DATA&lt;smuggled&gt;, not very clear...
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>		ok := td.<span style=color:#447fcf>Cmp</span>(t, got,
</span></span><span style=display:flex><span>			td.<span style=color:#447fcf>Smuggle</span>(
</span></span><span style=display:flex><span>				<span style=color:#6ab825;font-weight:700>func</span>(sd StartDuration) time.Time {
</span></span><span style=display:flex><span>					<span style=color:#6ab825;font-weight:700>return</span> sd.StartDate.<span style=color:#447fcf>Add</span>(sd.Duration)
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				td.<span style=color:#447fcf>Between</span>(
</span></span><span style=display:flex><span>					time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2018</span>, time.February, <span style=color:#3677a9>17</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, time.UTC),
</span></span><span style=display:flex><span>					time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2018</span>, time.February, <span style=color:#3677a9>19</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, time.UTC))))
</span></span><span style=display:flex><span>		fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#999;font-style:italic>// Name the computed value &#34;ComputedEndDate&#34; to render a Between() failure
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>		<span style=color:#999;font-style:italic>// more understandable, so error will be bound to DATA.ComputedEndDate
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>		ok = td.<span style=color:#447fcf>Cmp</span>(t, got,
</span></span><span style=display:flex><span>			td.<span style=color:#447fcf>Smuggle</span>(
</span></span><span style=display:flex><span>				<span style=color:#6ab825;font-weight:700>func</span>(sd StartDuration) td.SmuggledGot {
</span></span><span style=display:flex><span>					<span style=color:#6ab825;font-weight:700>return</span> td.SmuggledGot{
</span></span><span style=display:flex><span>						Name: <span style=color:#ed9d13>&#34;ComputedEndDate&#34;</span>,
</span></span><span style=display:flex><span>						Got:  sd.StartDate.<span style=color:#447fcf>Add</span>(sd.Duration),
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>				},
</span></span><span style=display:flex><span>				td.<span style=color:#447fcf>Between</span>(
</span></span><span style=display:flex><span>					time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2018</span>, time.February, <span style=color:#3677a9>17</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, time.UTC),
</span></span><span style=display:flex><span>					time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2018</span>, time.February, <span style=color:#3677a9>19</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, time.UTC))))
</span></span><span style=display:flex><span>		fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// false
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// false
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Interface example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := &amp;testing.T{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	gotTime, err := time.<span style=color:#447fcf>Parse</span>(time.RFC3339, <span style=color:#ed9d13>&#34;2018-05-23T12:13:14Z&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>if</span> err != <span style=color:#6ab825;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>		t.<span style=color:#447fcf>Fatal</span>(err)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Do not check the struct itself, but its stringified form
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok := td.<span style=color:#447fcf>Cmp</span>(t, gotTime,
</span></span><span style=display:flex><span>		td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(s fmt.Stringer) <span style=color:#6ab825;font-weight:700>string</span> {
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>return</span> s.<span style=color:#447fcf>String</span>()
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>			<span style=color:#ed9d13>&#34;2018-05-23 12:13:14 +0000 UTC&#34;</span>))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;stringified time.Time OK:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// If got does not implement the fmt.Stringer interface, it fails
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// without calling the Smuggle func
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#6ab825;font-weight:700>type</span> MyTime time.Time
</span></span><span style=display:flex><span>	ok = td.<span style=color:#447fcf>Cmp</span>(t, <span style=color:#447fcf>MyTime</span>(gotTime),
</span></span><span style=display:flex><span>		td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#6ab825;font-weight:700>func</span>(s fmt.Stringer) <span style=color:#6ab825;font-weight:700>string</span> {
</span></span><span style=display:flex><span>			fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;Smuggle func called!&#34;</span>)
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>return</span> s.<span style=color:#447fcf>String</span>()
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>			<span style=color:#ed9d13>&#34;2018-05-23 12:13:14 +0000 UTC&#34;</span>))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;stringified MyTime OK:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// stringified time.Time OK: true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// stringified MyTime OK: false
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Field_path example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := &amp;testing.T{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>type</span> Body <span style=color:#6ab825;font-weight:700>struct</span> {
</span></span><span style=display:flex><span>		Name  <span style=color:#6ab825;font-weight:700>string</span>
</span></span><span style=display:flex><span>		Value any
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>type</span> Request <span style=color:#6ab825;font-weight:700>struct</span> {
</span></span><span style=display:flex><span>		Body *Body
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>type</span> Transaction <span style=color:#6ab825;font-weight:700>struct</span> {
</span></span><span style=display:flex><span>		Request
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>type</span> ValueNum <span style=color:#6ab825;font-weight:700>struct</span> {
</span></span><span style=display:flex><span>		Num <span style=color:#6ab825;font-weight:700>int</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	got := &amp;Transaction{
</span></span><span style=display:flex><span>		Request: Request{
</span></span><span style=display:flex><span>			Body: &amp;Body{
</span></span><span style=display:flex><span>				Name:  <span style=color:#ed9d13>&#34;test&#34;</span>,
</span></span><span style=display:flex><span>				Value: &amp;ValueNum{Num: <span style=color:#3677a9>123</span>},
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Want to check whether Num is between 100 and 200?
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok := td.<span style=color:#447fcf>Cmp</span>(t, got,
</span></span><span style=display:flex><span>		td.<span style=color:#447fcf>Smuggle</span>(
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>func</span>(t *Transaction) (<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#6ab825;font-weight:700>error</span>) {
</span></span><span style=display:flex><span>				<span style=color:#6ab825;font-weight:700>if</span> t.Request.Body == <span style=color:#6ab825;font-weight:700>nil</span> ||
</span></span><span style=display:flex><span>					t.Request.Body.Value == <span style=color:#6ab825;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>					<span style=color:#6ab825;font-weight:700>return</span> <span style=color:#3677a9>0</span>, errors.<span style=color:#447fcf>New</span>(<span style=color:#ed9d13>&#34;Request.Body or Request.Body.Value is nil&#34;</span>)
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>				<span style=color:#6ab825;font-weight:700>if</span> v, ok := t.Request.Body.Value.(*ValueNum); ok &amp;&amp; v != <span style=color:#6ab825;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>					<span style=color:#6ab825;font-weight:700>return</span> v.Num, <span style=color:#6ab825;font-weight:700>nil</span>
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>				<span style=color:#6ab825;font-weight:700>return</span> <span style=color:#3677a9>0</span>, errors.<span style=color:#447fcf>New</span>(<span style=color:#ed9d13>&#34;Request.Body.Value isn&#39;t *ValueNum or nil&#34;</span>)
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>			td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>100</span>, <span style=color:#3677a9>200</span>)))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;check Num by hand:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Same, but automagically generated...
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok = td.<span style=color:#447fcf>Cmp</span>(t, got, td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#ed9d13>&#34;Request.Body.Value.Num&#34;</span>, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>100</span>, <span style=color:#3677a9>200</span>)))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;check Num using a fields-path:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// And as Request is an anonymous field, can be simplified further
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// as it can be omitted
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok = td.<span style=color:#447fcf>Cmp</span>(t, got, td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#ed9d13>&#34;Body.Value.Num&#34;</span>, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>100</span>, <span style=color:#3677a9>200</span>)))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;check Num using an other fields-path:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Note that maps and array/slices are supported
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	got.Request.Body.Value = <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>string</span>]any{
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;foo&#34;</span>: []any{
</span></span><span style=display:flex><span>			<span style=color:#3677a9>3</span>: <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>int</span>]<span style=color:#6ab825;font-weight:700>string</span>{<span style=color:#3677a9>666</span>: <span style=color:#ed9d13>&#34;bar&#34;</span>},
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	ok = td.<span style=color:#447fcf>Cmp</span>(t, got, td.<span style=color:#447fcf>Smuggle</span>(<span style=color:#ed9d13>&#34;Body.Value[foo][3][666]&#34;</span>, <span style=color:#ed9d13>&#34;bar&#34;</span>))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;check fields-path including maps/slices:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// check Num by hand: true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// check Num using a fields-path: true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// check Num using an other fields-path: true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// check fields-path including maps/slices: true
</span></span></span></code></pre></div></div></div></p><h2 id=cmpsmuggle-shortcut>CmpSmuggle shortcut</h2><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#6ab825;font-weight:700>func</span> <span style=color:#447fcf>CmpSmuggle</span>(t TestingT, got, fn , expectedValue any, args ...any) <span style=color:#6ab825;font-weight:700>bool</span>
</span></span></code></pre></div><p>CmpSmuggle is a shortcut for:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>td.<span style=color:#447fcf>Cmp</span>(t, got, td.<span style=color:#447fcf>Smuggle</span>(fn, expectedValue), args...)
</span></span></code></pre></div><p>See above for details.</p><p>Returns true if the test is OK, false if it fails.</p><p>If <em>t</em> is a <a href=https://pkg.go.dev/github.com/maxatome/go-testdeep/td#T><code>*T</code></a> then its Config field is inherited.</p><p><em>args&mldr;</em> are optional and allow to name the test. This name is
used in case of failure to qualify the test. If <code>len(args) > 1</code> and
the first item of <em>args</em> is a <code>string</code> and contains a &lsquo;%&rsquo; <code>rune</code> then
<a href=https://pkg.go.dev/fmt#Fprintf><code>fmt.Fprintf</code></a> is used to compose the name, else <em>args</em> are passed to
<a href=https://pkg.go.dev/fmt#Fprint><code>fmt.Fprint</code></a>. Do not forget it is the name of the test, not the
reason of a potential failure.</p><blockquote>
<p>See also <a href=https://pkg.go.dev/github.com/maxatome/go-testdeep/td#CmpSmuggle> CmpSmuggle godoc</a>.</p></blockquote><h3 id=examples-1>Examples</h3><p>
<div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Convert example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := &amp;testing.T{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	got := <span style=color:#24909d>int64</span>(<span style=color:#3677a9>123</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok := td.<span style=color:#447fcf>CmpSmuggle</span>(t, got, <span style=color:#6ab825;font-weight:700>func</span>(n <span style=color:#6ab825;font-weight:700>int64</span>) <span style=color:#6ab825;font-weight:700>int</span> { <span style=color:#6ab825;font-weight:700>return</span> <span style=color:#24909d>int</span>(n) }, <span style=color:#3677a9>123</span>,
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;checks int64 got against an int value&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok = td.<span style=color:#447fcf>CmpSmuggle</span>(t, <span style=color:#ed9d13>&#34;123&#34;</span>, <span style=color:#6ab825;font-weight:700>func</span>(numStr <span style=color:#6ab825;font-weight:700>string</span>) (<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#6ab825;font-weight:700>bool</span>) {
</span></span><span style=display:flex><span>		n, err := strconv.<span style=color:#447fcf>Atoi</span>(numStr)
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>return</span> n, err == <span style=color:#6ab825;font-weight:700>nil</span>
</span></span><span style=display:flex><span>	}, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>120</span>, <span style=color:#3677a9>130</span>),
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok = td.<span style=color:#447fcf>CmpSmuggle</span>(t, <span style=color:#ed9d13>&#34;123&#34;</span>, <span style=color:#6ab825;font-weight:700>func</span>(numStr <span style=color:#6ab825;font-weight:700>string</span>) (<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#6ab825;font-weight:700>bool</span>, <span style=color:#6ab825;font-weight:700>string</span>) {
</span></span><span style=display:flex><span>		n, err := strconv.<span style=color:#447fcf>Atoi</span>(numStr)
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>if</span> err != <span style=color:#6ab825;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>return</span> <span style=color:#3677a9>0</span>, <span style=color:#6ab825;font-weight:700>false</span>, <span style=color:#ed9d13>&#34;string must contain a number&#34;</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>return</span> n, <span style=color:#6ab825;font-weight:700>true</span>, <span style=color:#ed9d13>&#34;&#34;</span>
</span></span><span style=display:flex><span>	}, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>120</span>, <span style=color:#3677a9>130</span>),
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok = td.<span style=color:#447fcf>CmpSmuggle</span>(t, <span style=color:#ed9d13>&#34;123&#34;</span>, <span style=color:#6ab825;font-weight:700>func</span>(numStr <span style=color:#6ab825;font-weight:700>string</span>) (<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#6ab825;font-weight:700>error</span>) { <span style=color:#999;font-style:italic>//nolint: gocritic
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>		<span style=color:#6ab825;font-weight:700>return</span> strconv.<span style=color:#447fcf>Atoi</span>(numStr)
</span></span><span style=display:flex><span>	}, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>120</span>, <span style=color:#3677a9>130</span>),
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Short version :)
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok = td.<span style=color:#447fcf>CmpSmuggle</span>(t, <span style=color:#ed9d13>&#34;123&#34;</span>, strconv.Atoi, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>120</span>, <span style=color:#3677a9>130</span>),
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Lax example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := &amp;testing.T{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// got is an int16 and Smuggle func input is an int64: it is OK
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	got := <span style=color:#24909d>int</span>(<span style=color:#3677a9>123</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok := td.<span style=color:#447fcf>CmpSmuggle</span>(t, got, <span style=color:#6ab825;font-weight:700>func</span>(n <span style=color:#6ab825;font-weight:700>int64</span>) <span style=color:#6ab825;font-weight:700>uint32</span> { <span style=color:#6ab825;font-weight:700>return</span> <span style=color:#24909d>uint32</span>(n) }, <span style=color:#24909d>uint32</span>(<span style=color:#3677a9>123</span>))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;got int16(123) → smuggle via int64 → uint32(123):&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// got int16(123) → smuggle via int64 → uint32(123): true
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Auto_unmarshal example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := &amp;testing.T{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Automatically json.Unmarshal to compare
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	got := []<span style=color:#24909d>byte</span>(<span style=color:#ed9d13>`{&#34;a&#34;:1,&#34;b&#34;:2}`</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok := td.<span style=color:#447fcf>CmpSmuggle</span>(t, got, <span style=color:#6ab825;font-weight:700>func</span>(b json.RawMessage) (r <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>string</span>]<span style=color:#6ab825;font-weight:700>int</span>, err <span style=color:#6ab825;font-weight:700>error</span>) {
</span></span><span style=display:flex><span>		err = json.<span style=color:#447fcf>Unmarshal</span>(b, &amp;r)
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>return</span>
</span></span><span style=display:flex><span>	}, <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>string</span>]<span style=color:#6ab825;font-weight:700>int</span>{
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;a&#34;</span>: <span style=color:#3677a9>1</span>,
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;b&#34;</span>: <span style=color:#3677a9>2</span>,
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;JSON contents is OK:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// JSON contents is OK: true
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Cast example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := &amp;testing.T{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// A string containing JSON
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	got := <span style=color:#ed9d13>`{ &#34;foo&#34;: 123 }`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Automatically cast a string to a json.RawMessage so td.JSON can operate
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok := td.<span style=color:#447fcf>CmpSmuggle</span>(t, got, json.RawMessage{}, td.<span style=color:#447fcf>JSON</span>(<span style=color:#ed9d13>`{&#34;foo&#34;:123}`</span>))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;JSON contents in string is OK:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Automatically read from io.Reader to a json.RawMessage
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok = td.<span style=color:#447fcf>CmpSmuggle</span>(t, bytes.<span style=color:#447fcf>NewReader</span>([]<span style=color:#24909d>byte</span>(got)), json.RawMessage{}, td.<span style=color:#447fcf>JSON</span>(<span style=color:#ed9d13>`{&#34;foo&#34;:123}`</span>))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;JSON contents just read is OK:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// JSON contents in string is OK: true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// JSON contents just read is OK: true
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Complex example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := &amp;testing.T{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// No end date but a start date and a duration
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#6ab825;font-weight:700>type</span> StartDuration <span style=color:#6ab825;font-weight:700>struct</span> {
</span></span><span style=display:flex><span>		StartDate time.Time
</span></span><span style=display:flex><span>		Duration  time.Duration
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Checks that end date is between 17th and 19th February both at 0h
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// for each of these durations in hours
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>for</span> _, duration := <span style=color:#6ab825;font-weight:700>range</span> []time.Duration{<span style=color:#3677a9>48</span> * time.Hour, <span style=color:#3677a9>72</span> * time.Hour, <span style=color:#3677a9>96</span> * time.Hour} {
</span></span><span style=display:flex><span>		got := StartDuration{
</span></span><span style=display:flex><span>			StartDate: time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2018</span>, time.February, <span style=color:#3677a9>14</span>, <span style=color:#3677a9>12</span>, <span style=color:#3677a9>13</span>, <span style=color:#3677a9>14</span>, <span style=color:#3677a9>0</span>, time.UTC),
</span></span><span style=display:flex><span>			Duration:  duration,
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#999;font-style:italic>// Simplest way, but in case of Between() failure, error will be bound
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>		<span style=color:#999;font-style:italic>// to DATA&lt;smuggled&gt;, not very clear...
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>		ok := td.<span style=color:#447fcf>CmpSmuggle</span>(t, got, <span style=color:#6ab825;font-weight:700>func</span>(sd StartDuration) time.Time {
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>return</span> sd.StartDate.<span style=color:#447fcf>Add</span>(sd.Duration)
</span></span><span style=display:flex><span>		}, td.<span style=color:#447fcf>Between</span>(
</span></span><span style=display:flex><span>			time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2018</span>, time.February, <span style=color:#3677a9>17</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, time.UTC),
</span></span><span style=display:flex><span>			time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2018</span>, time.February, <span style=color:#3677a9>19</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, time.UTC)))
</span></span><span style=display:flex><span>		fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#999;font-style:italic>// Name the computed value &#34;ComputedEndDate&#34; to render a Between() failure
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>		<span style=color:#999;font-style:italic>// more understandable, so error will be bound to DATA.ComputedEndDate
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>		ok = td.<span style=color:#447fcf>CmpSmuggle</span>(t, got, <span style=color:#6ab825;font-weight:700>func</span>(sd StartDuration) td.SmuggledGot {
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>return</span> td.SmuggledGot{
</span></span><span style=display:flex><span>				Name: <span style=color:#ed9d13>&#34;ComputedEndDate&#34;</span>,
</span></span><span style=display:flex><span>				Got:  sd.StartDate.<span style=color:#447fcf>Add</span>(sd.Duration),
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		}, td.<span style=color:#447fcf>Between</span>(
</span></span><span style=display:flex><span>			time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2018</span>, time.February, <span style=color:#3677a9>17</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, time.UTC),
</span></span><span style=display:flex><span>			time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2018</span>, time.February, <span style=color:#3677a9>19</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, time.UTC)))
</span></span><span style=display:flex><span>		fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// false
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// false
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Interface example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := &amp;testing.T{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	gotTime, err := time.<span style=color:#447fcf>Parse</span>(time.RFC3339, <span style=color:#ed9d13>&#34;2018-05-23T12:13:14Z&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>if</span> err != <span style=color:#6ab825;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>		t.<span style=color:#447fcf>Fatal</span>(err)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Do not check the struct itself, but its stringified form
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok := td.<span style=color:#447fcf>CmpSmuggle</span>(t, gotTime, <span style=color:#6ab825;font-weight:700>func</span>(s fmt.Stringer) <span style=color:#6ab825;font-weight:700>string</span> {
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>return</span> s.<span style=color:#447fcf>String</span>()
</span></span><span style=display:flex><span>	}, <span style=color:#ed9d13>&#34;2018-05-23 12:13:14 +0000 UTC&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;stringified time.Time OK:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// If got does not implement the fmt.Stringer interface, it fails
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// without calling the Smuggle func
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#6ab825;font-weight:700>type</span> MyTime time.Time
</span></span><span style=display:flex><span>	ok = td.<span style=color:#447fcf>CmpSmuggle</span>(t, <span style=color:#447fcf>MyTime</span>(gotTime), <span style=color:#6ab825;font-weight:700>func</span>(s fmt.Stringer) <span style=color:#6ab825;font-weight:700>string</span> {
</span></span><span style=display:flex><span>		fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;Smuggle func called!&#34;</span>)
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>return</span> s.<span style=color:#447fcf>String</span>()
</span></span><span style=display:flex><span>	}, <span style=color:#ed9d13>&#34;2018-05-23 12:13:14 +0000 UTC&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;stringified MyTime OK:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// stringified time.Time OK: true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// stringified MyTime OK: false
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Field_path example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := &amp;testing.T{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>type</span> Body <span style=color:#6ab825;font-weight:700>struct</span> {
</span></span><span style=display:flex><span>		Name  <span style=color:#6ab825;font-weight:700>string</span>
</span></span><span style=display:flex><span>		Value any
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>type</span> Request <span style=color:#6ab825;font-weight:700>struct</span> {
</span></span><span style=display:flex><span>		Body *Body
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>type</span> Transaction <span style=color:#6ab825;font-weight:700>struct</span> {
</span></span><span style=display:flex><span>		Request
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>type</span> ValueNum <span style=color:#6ab825;font-weight:700>struct</span> {
</span></span><span style=display:flex><span>		Num <span style=color:#6ab825;font-weight:700>int</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	got := &amp;Transaction{
</span></span><span style=display:flex><span>		Request: Request{
</span></span><span style=display:flex><span>			Body: &amp;Body{
</span></span><span style=display:flex><span>				Name:  <span style=color:#ed9d13>&#34;test&#34;</span>,
</span></span><span style=display:flex><span>				Value: &amp;ValueNum{Num: <span style=color:#3677a9>123</span>},
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Want to check whether Num is between 100 and 200?
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok := td.<span style=color:#447fcf>CmpSmuggle</span>(t, got, <span style=color:#6ab825;font-weight:700>func</span>(t *Transaction) (<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#6ab825;font-weight:700>error</span>) {
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>if</span> t.Request.Body == <span style=color:#6ab825;font-weight:700>nil</span> ||
</span></span><span style=display:flex><span>			t.Request.Body.Value == <span style=color:#6ab825;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>return</span> <span style=color:#3677a9>0</span>, errors.<span style=color:#447fcf>New</span>(<span style=color:#ed9d13>&#34;Request.Body or Request.Body.Value is nil&#34;</span>)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>if</span> v, ok := t.Request.Body.Value.(*ValueNum); ok &amp;&amp; v != <span style=color:#6ab825;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>return</span> v.Num, <span style=color:#6ab825;font-weight:700>nil</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>return</span> <span style=color:#3677a9>0</span>, errors.<span style=color:#447fcf>New</span>(<span style=color:#ed9d13>&#34;Request.Body.Value isn&#39;t *ValueNum or nil&#34;</span>)
</span></span><span style=display:flex><span>	}, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>100</span>, <span style=color:#3677a9>200</span>))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;check Num by hand:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Same, but automagically generated...
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok = td.<span style=color:#447fcf>CmpSmuggle</span>(t, got, <span style=color:#ed9d13>&#34;Request.Body.Value.Num&#34;</span>, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>100</span>, <span style=color:#3677a9>200</span>))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;check Num using a fields-path:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// And as Request is an anonymous field, can be simplified further
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// as it can be omitted
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok = td.<span style=color:#447fcf>CmpSmuggle</span>(t, got, <span style=color:#ed9d13>&#34;Body.Value.Num&#34;</span>, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>100</span>, <span style=color:#3677a9>200</span>))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;check Num using an other fields-path:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Note that maps and array/slices are supported
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	got.Request.Body.Value = <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>string</span>]any{
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;foo&#34;</span>: []any{
</span></span><span style=display:flex><span>			<span style=color:#3677a9>3</span>: <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>int</span>]<span style=color:#6ab825;font-weight:700>string</span>{<span style=color:#3677a9>666</span>: <span style=color:#ed9d13>&#34;bar&#34;</span>},
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	ok = td.<span style=color:#447fcf>CmpSmuggle</span>(t, got, <span style=color:#ed9d13>&#34;Body.Value[foo][3][666]&#34;</span>, <span style=color:#ed9d13>&#34;bar&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;check fields-path including maps/slices:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// check Num by hand: true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// check Num using a fields-path: true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// check Num using an other fields-path: true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// check fields-path including maps/slices: true
</span></span></span></code></pre></div></div></div></p><h2 id=tsmuggle-shortcut>T.Smuggle shortcut</h2><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#6ab825;font-weight:700>func</span> (t *T) <span style=color:#447fcf>Smuggle</span>(got, fn , expectedValue any, args ...any) <span style=color:#6ab825;font-weight:700>bool</span>
</span></span></code></pre></div><p>Smuggle is a shortcut for:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>t.<span style=color:#447fcf>Cmp</span>(got, td.<span style=color:#447fcf>Smuggle</span>(fn, expectedValue), args...)
</span></span></code></pre></div><p>See above for details.</p><p>Returns true if the test is OK, false if it fails.</p><p><em>args&mldr;</em> are optional and allow to name the test. This name is
used in case of failure to qualify the test. If <code>len(args) > 1</code> and
the first item of <em>args</em> is a <code>string</code> and contains a &lsquo;%&rsquo; <code>rune</code> then
<a href=https://pkg.go.dev/fmt#Fprintf><code>fmt.Fprintf</code></a> is used to compose the name, else <em>args</em> are passed to
<a href=https://pkg.go.dev/fmt#Fprint><code>fmt.Fprint</code></a>. Do not forget it is the name of the test, not the
reason of a potential failure.</p><blockquote>
<p>See also <a href=https://pkg.go.dev/github.com/maxatome/go-testdeep/td#T.Smuggle> T.Smuggle godoc</a>.</p></blockquote><h3 id=examples-2>Examples</h3><p>
<div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Convert example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := td.<span style=color:#447fcf>NewT</span>(&amp;testing.T{})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	got := <span style=color:#24909d>int64</span>(<span style=color:#3677a9>123</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok := t.<span style=color:#447fcf>Smuggle</span>(got, <span style=color:#6ab825;font-weight:700>func</span>(n <span style=color:#6ab825;font-weight:700>int64</span>) <span style=color:#6ab825;font-weight:700>int</span> { <span style=color:#6ab825;font-weight:700>return</span> <span style=color:#24909d>int</span>(n) }, <span style=color:#3677a9>123</span>,
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;checks int64 got against an int value&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok = t.<span style=color:#447fcf>Smuggle</span>(<span style=color:#ed9d13>&#34;123&#34;</span>, <span style=color:#6ab825;font-weight:700>func</span>(numStr <span style=color:#6ab825;font-weight:700>string</span>) (<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#6ab825;font-weight:700>bool</span>) {
</span></span><span style=display:flex><span>		n, err := strconv.<span style=color:#447fcf>Atoi</span>(numStr)
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>return</span> n, err == <span style=color:#6ab825;font-weight:700>nil</span>
</span></span><span style=display:flex><span>	}, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>120</span>, <span style=color:#3677a9>130</span>),
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok = t.<span style=color:#447fcf>Smuggle</span>(<span style=color:#ed9d13>&#34;123&#34;</span>, <span style=color:#6ab825;font-weight:700>func</span>(numStr <span style=color:#6ab825;font-weight:700>string</span>) (<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#6ab825;font-weight:700>bool</span>, <span style=color:#6ab825;font-weight:700>string</span>) {
</span></span><span style=display:flex><span>		n, err := strconv.<span style=color:#447fcf>Atoi</span>(numStr)
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>if</span> err != <span style=color:#6ab825;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>return</span> <span style=color:#3677a9>0</span>, <span style=color:#6ab825;font-weight:700>false</span>, <span style=color:#ed9d13>&#34;string must contain a number&#34;</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>return</span> n, <span style=color:#6ab825;font-weight:700>true</span>, <span style=color:#ed9d13>&#34;&#34;</span>
</span></span><span style=display:flex><span>	}, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>120</span>, <span style=color:#3677a9>130</span>),
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok = t.<span style=color:#447fcf>Smuggle</span>(<span style=color:#ed9d13>&#34;123&#34;</span>, <span style=color:#6ab825;font-weight:700>func</span>(numStr <span style=color:#6ab825;font-weight:700>string</span>) (<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#6ab825;font-weight:700>error</span>) { <span style=color:#999;font-style:italic>//nolint: gocritic
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>		<span style=color:#6ab825;font-weight:700>return</span> strconv.<span style=color:#447fcf>Atoi</span>(numStr)
</span></span><span style=display:flex><span>	}, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>120</span>, <span style=color:#3677a9>130</span>),
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Short version :)
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok = t.<span style=color:#447fcf>Smuggle</span>(<span style=color:#ed9d13>&#34;123&#34;</span>, strconv.Atoi, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>120</span>, <span style=color:#3677a9>130</span>),
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;checks that number in %#v is in [120 .. 130]&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Lax example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := td.<span style=color:#447fcf>NewT</span>(&amp;testing.T{})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// got is an int16 and Smuggle func input is an int64: it is OK
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	got := <span style=color:#24909d>int</span>(<span style=color:#3677a9>123</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok := t.<span style=color:#447fcf>Smuggle</span>(got, <span style=color:#6ab825;font-weight:700>func</span>(n <span style=color:#6ab825;font-weight:700>int64</span>) <span style=color:#6ab825;font-weight:700>uint32</span> { <span style=color:#6ab825;font-weight:700>return</span> <span style=color:#24909d>uint32</span>(n) }, <span style=color:#24909d>uint32</span>(<span style=color:#3677a9>123</span>))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;got int16(123) → smuggle via int64 → uint32(123):&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// got int16(123) → smuggle via int64 → uint32(123): true
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Auto_unmarshal example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := td.<span style=color:#447fcf>NewT</span>(&amp;testing.T{})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Automatically json.Unmarshal to compare
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	got := []<span style=color:#24909d>byte</span>(<span style=color:#ed9d13>`{&#34;a&#34;:1,&#34;b&#34;:2}`</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	ok := t.<span style=color:#447fcf>Smuggle</span>(got, <span style=color:#6ab825;font-weight:700>func</span>(b json.RawMessage) (r <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>string</span>]<span style=color:#6ab825;font-weight:700>int</span>, err <span style=color:#6ab825;font-weight:700>error</span>) {
</span></span><span style=display:flex><span>		err = json.<span style=color:#447fcf>Unmarshal</span>(b, &amp;r)
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>return</span>
</span></span><span style=display:flex><span>	}, <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>string</span>]<span style=color:#6ab825;font-weight:700>int</span>{
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;a&#34;</span>: <span style=color:#3677a9>1</span>,
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;b&#34;</span>: <span style=color:#3677a9>2</span>,
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;JSON contents is OK:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// JSON contents is OK: true
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Cast example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := td.<span style=color:#447fcf>NewT</span>(&amp;testing.T{})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// A string containing JSON
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	got := <span style=color:#ed9d13>`{ &#34;foo&#34;: 123 }`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Automatically cast a string to a json.RawMessage so td.JSON can operate
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok := t.<span style=color:#447fcf>Smuggle</span>(got, json.RawMessage{}, td.<span style=color:#447fcf>JSON</span>(<span style=color:#ed9d13>`{&#34;foo&#34;:123}`</span>))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;JSON contents in string is OK:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Automatically read from io.Reader to a json.RawMessage
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok = t.<span style=color:#447fcf>Smuggle</span>(bytes.<span style=color:#447fcf>NewReader</span>([]<span style=color:#24909d>byte</span>(got)), json.RawMessage{}, td.<span style=color:#447fcf>JSON</span>(<span style=color:#ed9d13>`{&#34;foo&#34;:123}`</span>))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;JSON contents just read is OK:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// JSON contents in string is OK: true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// JSON contents just read is OK: true
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Complex example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := td.<span style=color:#447fcf>NewT</span>(&amp;testing.T{})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// No end date but a start date and a duration
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#6ab825;font-weight:700>type</span> StartDuration <span style=color:#6ab825;font-weight:700>struct</span> {
</span></span><span style=display:flex><span>		StartDate time.Time
</span></span><span style=display:flex><span>		Duration  time.Duration
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Checks that end date is between 17th and 19th February both at 0h
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// for each of these durations in hours
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>for</span> _, duration := <span style=color:#6ab825;font-weight:700>range</span> []time.Duration{<span style=color:#3677a9>48</span> * time.Hour, <span style=color:#3677a9>72</span> * time.Hour, <span style=color:#3677a9>96</span> * time.Hour} {
</span></span><span style=display:flex><span>		got := StartDuration{
</span></span><span style=display:flex><span>			StartDate: time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2018</span>, time.February, <span style=color:#3677a9>14</span>, <span style=color:#3677a9>12</span>, <span style=color:#3677a9>13</span>, <span style=color:#3677a9>14</span>, <span style=color:#3677a9>0</span>, time.UTC),
</span></span><span style=display:flex><span>			Duration:  duration,
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#999;font-style:italic>// Simplest way, but in case of Between() failure, error will be bound
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>		<span style=color:#999;font-style:italic>// to DATA&lt;smuggled&gt;, not very clear...
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>		ok := t.<span style=color:#447fcf>Smuggle</span>(got, <span style=color:#6ab825;font-weight:700>func</span>(sd StartDuration) time.Time {
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>return</span> sd.StartDate.<span style=color:#447fcf>Add</span>(sd.Duration)
</span></span><span style=display:flex><span>		}, td.<span style=color:#447fcf>Between</span>(
</span></span><span style=display:flex><span>			time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2018</span>, time.February, <span style=color:#3677a9>17</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, time.UTC),
</span></span><span style=display:flex><span>			time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2018</span>, time.February, <span style=color:#3677a9>19</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, time.UTC)))
</span></span><span style=display:flex><span>		fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#999;font-style:italic>// Name the computed value &#34;ComputedEndDate&#34; to render a Between() failure
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>		<span style=color:#999;font-style:italic>// more understandable, so error will be bound to DATA.ComputedEndDate
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>		ok = t.<span style=color:#447fcf>Smuggle</span>(got, <span style=color:#6ab825;font-weight:700>func</span>(sd StartDuration) td.SmuggledGot {
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>return</span> td.SmuggledGot{
</span></span><span style=display:flex><span>				Name: <span style=color:#ed9d13>&#34;ComputedEndDate&#34;</span>,
</span></span><span style=display:flex><span>				Got:  sd.StartDate.<span style=color:#447fcf>Add</span>(sd.Duration),
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		}, td.<span style=color:#447fcf>Between</span>(
</span></span><span style=display:flex><span>			time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2018</span>, time.February, <span style=color:#3677a9>17</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, time.UTC),
</span></span><span style=display:flex><span>			time.<span style=color:#447fcf>Date</span>(<span style=color:#3677a9>2018</span>, time.February, <span style=color:#3677a9>19</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, <span style=color:#3677a9>0</span>, time.UTC)))
</span></span><span style=display:flex><span>		fmt.<span style=color:#447fcf>Println</span>(ok)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// false
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// false
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// true
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Interface example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := td.<span style=color:#447fcf>NewT</span>(&amp;testing.T{})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	gotTime, err := time.<span style=color:#447fcf>Parse</span>(time.RFC3339, <span style=color:#ed9d13>&#34;2018-05-23T12:13:14Z&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>if</span> err != <span style=color:#6ab825;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>		t.<span style=color:#447fcf>Fatal</span>(err)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Do not check the struct itself, but its stringified form
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok := t.<span style=color:#447fcf>Smuggle</span>(gotTime, <span style=color:#6ab825;font-weight:700>func</span>(s fmt.Stringer) <span style=color:#6ab825;font-weight:700>string</span> {
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>return</span> s.<span style=color:#447fcf>String</span>()
</span></span><span style=display:flex><span>	}, <span style=color:#ed9d13>&#34;2018-05-23 12:13:14 +0000 UTC&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;stringified time.Time OK:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// If got does not implement the fmt.Stringer interface, it fails
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// without calling the Smuggle func
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#6ab825;font-weight:700>type</span> MyTime time.Time
</span></span><span style=display:flex><span>	ok = t.<span style=color:#447fcf>Smuggle</span>(<span style=color:#447fcf>MyTime</span>(gotTime), <span style=color:#6ab825;font-weight:700>func</span>(s fmt.Stringer) <span style=color:#6ab825;font-weight:700>string</span> {
</span></span><span style=display:flex><span>		fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;Smuggle func called!&#34;</span>)
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>return</span> s.<span style=color:#447fcf>String</span>()
</span></span><span style=display:flex><span>	}, <span style=color:#ed9d13>&#34;2018-05-23 12:13:14 +0000 UTC&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;stringified MyTime OK:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// stringified time.Time OK: true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// stringified MyTime OK: false
</span></span></span></code></pre></div></div></div><div class=expand>
<div class=expand-label style=cursor:pointer onclick='$h=$(this),$h.next("div").slideToggle(100,function(){$h.children("i").attr("class",function(){return $h.next("div").is(":visible")?"fas fa-chevron-down":"fas fa-chevron-right"})})'>
<i style=font-size:x-small class="fas fa-chevron-right"></i>
<span>
Field_path example
</span>
</div><div class=expand-content style=display:none>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	t := td.<span style=color:#447fcf>NewT</span>(&amp;testing.T{})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>type</span> Body <span style=color:#6ab825;font-weight:700>struct</span> {
</span></span><span style=display:flex><span>		Name  <span style=color:#6ab825;font-weight:700>string</span>
</span></span><span style=display:flex><span>		Value any
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>type</span> Request <span style=color:#6ab825;font-weight:700>struct</span> {
</span></span><span style=display:flex><span>		Body *Body
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>type</span> Transaction <span style=color:#6ab825;font-weight:700>struct</span> {
</span></span><span style=display:flex><span>		Request
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#6ab825;font-weight:700>type</span> ValueNum <span style=color:#6ab825;font-weight:700>struct</span> {
</span></span><span style=display:flex><span>		Num <span style=color:#6ab825;font-weight:700>int</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	got := &amp;Transaction{
</span></span><span style=display:flex><span>		Request: Request{
</span></span><span style=display:flex><span>			Body: &amp;Body{
</span></span><span style=display:flex><span>				Name:  <span style=color:#ed9d13>&#34;test&#34;</span>,
</span></span><span style=display:flex><span>				Value: &amp;ValueNum{Num: <span style=color:#3677a9>123</span>},
</span></span><span style=display:flex><span>			},
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Want to check whether Num is between 100 and 200?
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok := t.<span style=color:#447fcf>Smuggle</span>(got, <span style=color:#6ab825;font-weight:700>func</span>(t *Transaction) (<span style=color:#6ab825;font-weight:700>int</span>, <span style=color:#6ab825;font-weight:700>error</span>) {
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>if</span> t.Request.Body == <span style=color:#6ab825;font-weight:700>nil</span> ||
</span></span><span style=display:flex><span>			t.Request.Body.Value == <span style=color:#6ab825;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>return</span> <span style=color:#3677a9>0</span>, errors.<span style=color:#447fcf>New</span>(<span style=color:#ed9d13>&#34;Request.Body or Request.Body.Value is nil&#34;</span>)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>if</span> v, ok := t.Request.Body.Value.(*ValueNum); ok &amp;&amp; v != <span style=color:#6ab825;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#6ab825;font-weight:700>return</span> v.Num, <span style=color:#6ab825;font-weight:700>nil</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#6ab825;font-weight:700>return</span> <span style=color:#3677a9>0</span>, errors.<span style=color:#447fcf>New</span>(<span style=color:#ed9d13>&#34;Request.Body.Value isn&#39;t *ValueNum or nil&#34;</span>)
</span></span><span style=display:flex><span>	}, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>100</span>, <span style=color:#3677a9>200</span>))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;check Num by hand:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Same, but automagically generated...
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok = t.<span style=color:#447fcf>Smuggle</span>(got, <span style=color:#ed9d13>&#34;Request.Body.Value.Num&#34;</span>, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>100</span>, <span style=color:#3677a9>200</span>))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;check Num using a fields-path:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// And as Request is an anonymous field, can be simplified further
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// as it can be omitted
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	ok = t.<span style=color:#447fcf>Smuggle</span>(got, <span style=color:#ed9d13>&#34;Body.Value.Num&#34;</span>, td.<span style=color:#447fcf>Between</span>(<span style=color:#3677a9>100</span>, <span style=color:#3677a9>200</span>))
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;check Num using an other fields-path:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Note that maps and array/slices are supported
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	got.Request.Body.Value = <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>string</span>]any{
</span></span><span style=display:flex><span>		<span style=color:#ed9d13>&#34;foo&#34;</span>: []any{
</span></span><span style=display:flex><span>			<span style=color:#3677a9>3</span>: <span style=color:#6ab825;font-weight:700>map</span>[<span style=color:#6ab825;font-weight:700>int</span>]<span style=color:#6ab825;font-weight:700>string</span>{<span style=color:#3677a9>666</span>: <span style=color:#ed9d13>&#34;bar&#34;</span>},
</span></span><span style=display:flex><span>		},
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	ok = t.<span style=color:#447fcf>Smuggle</span>(got, <span style=color:#ed9d13>&#34;Body.Value[foo][3][666]&#34;</span>, <span style=color:#ed9d13>&#34;bar&#34;</span>)
</span></span><span style=display:flex><span>	fmt.<span style=color:#447fcf>Println</span>(<span style=color:#ed9d13>&#34;check fields-path including maps/slices:&#34;</span>, ok)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#999;font-style:italic>// Output:
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// check Num by hand: true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// check Num using a fields-path: true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// check Num using an other fields-path: true
</span></span></span><span style=display:flex><span><span style=color:#999;font-style:italic></span>	<span style=color:#999;font-style:italic>// check fields-path including maps/slices: true
</span></span></span></code></pre></div></div></div></p><footer class=footline>
</footer></div></div><div id=navigation>
<a class="nav nav-prev" href=/operators/slice/ title=Slice> <i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/operators/sstruct/ title=SStruct style=margin-right:0><i class="fa fa-chevron-right"></i></a>
</div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px>
<div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1678884514></script>
<script src=/js/perfect-scrollbar.min.js?1678884514></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1678884514></script>
<script src=/js/jquery.sticky.js?1678884514></script>
<script src=/js/featherlight.min.js?1678884514></script>
<script src=/js/highlight.pack.js?1678884514></script>
<script>hljs.initHighlightingOnLoad()</script>
<script src=/js/modernizr.custom-3.6.0.js?1678884514></script>
<script src=/js/learn.js?1678884514></script>
<script src=/js/hugo-learn.js?1678884514></script>
<link href=/mermaid/mermaid.css?1678884514 rel=stylesheet>
<script src=/mermaid/mermaid.js?1678884514></script>
<script>mermaid.initialize({startOnLoad:!0})</script>
</body></html>